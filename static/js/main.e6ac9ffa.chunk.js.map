{"version":3,"sources":["styles/theme.js","navigation/NotFound.js","components/shared/SearchBar/SearchBar.js","components/shared/TabPanel/TabPanel.js","assets/thoth-logo.png","services/CONSTANTS.js","services/apiCache.js","services/thothApi.js","pages/Home/Home.js","components/shared/InfoCard/InfoCard.js","components/shared/ProgressBar/ProgressBar.js","components/shared/LoadingErrorTemplate/ErrorPage.js","components/shared/LoadingErrorTemplate/CustomProgress.js","components/shared/LoadingErrorTemplate/index.js","components/dashboard/SummaryPage/DependenciesMetric/DependenciesMetric.js","components/dashboard/SummaryPage/LicenseMetric/LicenseGroup/LicenseGroup.js","components/dashboard/SummaryPage/LicenseMetric/LicenseMetric.js","components/dashboard/SummaryPage/AdviseMetric/AdviseMetric.js","components/dashboard/SummaryPage/CustomCardAction/CustomCardAction.js","components/dashboard/SummaryPage/SummaryPage.js","components/shared/IconText/IconText.js","utils/timeSince.js","components/dashboard/AdviseHeader/utils.js","components/dashboard/AdviseHeader/CustomAlert/CustomAlert.js","components/dashboard/AdviseHeader/AdviseHeader.js","components/dashboard/AdvisePage/AdviseTableView/utils.js","components/dashboard/AdvisePage/AdviseTableView/EnhancedTableHead/EnhancedTableHead.js","components/dashboard/AdvisePage/AdviseTableView/AdviseTableView.js","config/networkOptions.js","components/dashboard/AdvisePage/SelectedPackage/NetworkGraphView/Popup/Popup.js","components/dashboard/AdvisePage/SelectedPackage/NetworkGraphView/NetworkGraphView.js","components/dashboard/AdvisePage/SelectedPackage/SelectedPackage.js","components/dashboard/AdvisePage/AdvisePage.js","utils/Node.js","utils/Graph.js","pages/Dashboard/hooks/useLockFileToGraph.js","pages/Dashboard/utils.js","pages/Dashboard/hooks/useComputeMetrics.js","pages/Dashboard/hooks/useInterval.js","pages/Dashboard/Dashboard.js","pages/Dashboard/hooks/useMergeGraphs.js","components/package/PackageHeader/PackageHeader.js","pages/PackageOverview/PackageOverview.js","navigation/RouterConfig.js","navigation/CONSTANTS.js","redux/reducer.js","App.js","index.js"],"names":["themeLight","createTheme","palette","background","default","primary","light","main","dark","secondary","text","priamry","typography","fontFamily","h4","fontWeight","fontSize","color","lineHeight","h5","h6","body1","body2","subtitle1","subtitle2","NotFound","Typography","variant","SearchBar","props","onChange","label","helpertext","boxprops","error","lefticon","righticon","Box","sx","Paper","component","p","display","alignItems","borderColor","undefined","InputBase","ml","flex","placeholder","e","target","value","TabPanel","children","index","role","hidden","id","aria-labelledby","className","PYPI","THOTH","cacheGet","group","key","stored_cache","cacheReset","getLicenses","url","fetch","then","response","JSON","parse","searchForPackage","name","version","axios","get","thothSearchForPackage","cache","Promise","resolve","params","headers","accept","res","data","metadata","catch","status","isAxiosError","info","thothAdvise","pipfile","pipfileLock","d","application_stack","requirements","requirements_format","requirements_lock","runtime_environment","operating_system","platform","python_version","post","recommendation_type","force","thothGetDependencies","Home","history","useHistory","dispatch","useContext","DispatchContext","useState","searchQuery","setSearchQuery","pipfileQuery","setPipfileQuery","pipfileLockQuery","setPipfileLockQuery","searchError","setSearchError","pipfileError","setPipfileError","pipfileLockError","setPipfileLockError","mode","setMode","queryLoading","setQueryLoading","handleChange","box","handleAnalyze","a","push","PACKAGE","fail","type","param","payload","analysis_id","ADVISE","includes","Grid","container","justifyContent","item","Button","marginTop","alt","src","logo","height","width","mt","spacing","xs","align","mr","mb","direction","map","stat","ToggleButtonGroup","exclusive","event","newMode","size","ToggleButton","minHeight","sm","lg","onClick","minWidth","multiline","rows","textAlign","LoadingButton","loading","bgcolor","useStyles","makeStyles","root","bullet","margin","transform","title","pos","marginBottom","InfoCard","cardMeta","cardBody","cardAction","classes","Card","CardHeader","action","subheader","subTitle","CardContent","CustomLinearProgress","withStyles","theme","borderRadius","colorPrimary","backgroundColor","grey","bar","LinearProgress","gridTemplateColumns","gridGap","whiteSpace","overflow","textOverflow","ProgressBar","total","ErrorText","customProgressRoot","flexDirection","CustomProgress","amount","note","CircularProgress","LoadingErrorTemplate","isError","isLoading","errorText","loadingPage","loadingAmount","loadingText","ErrorPage","DependenciesMetric","metric","totalDependencies","all","direct","indirect","roots","gutterBottom","Divider","List","TransitionGroup","Object","entries","i","t","Collapse","ListItem","ListItemText","LicenseGroup","totalLicenses","React","open","setOpen","_meta","isOsiApproved","keys","length","in","timeout","unmountOnExit","my","sort","b","k","v","Chip","depth","LicenseMetric","deepError","more","setMore","licenses","useMemo","reduce","sum","state","slice","AdviseMetric","added","removed","unchanged","build","justification","CustomCardAction","SummaryPage","StateContext","setPipfile","handlePipfile","newPipfile","metrics","md","advise","dependencies","IconText","icon","link","href","marginLeft","timeSince","date","seconds","Math","floor","Date","interval","num","CustomAlert","Alert","severity","toLowerCase","message","titleRow","marginRight","linksRow","alert","AdviseHeader","finished_at","started_at","datetime","adviseID","expandAlerts","setExpandAlerts","report","ERROR","toUpperCase","statusText","statusColor","alerts","stack_info","filter","descendingComparator","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","el","headCells","numeric","EnhancedTableHead","onRequestSort","TableHead","TableRow","headCell","TableCell","padding","sortDirection","TableSortLabel","active","property","visuallyHidden","AdviseTableView","search","filteredGraph","setSelected","selected","setOrder","setOrderBy","page","setPage","rowsPerPage","setRowsPerPage","setRows","useEffect","newRows","nodes","forEach","node","warnings","license","adjacents","change","summary","emptyRows","max","TableContainer","Table","rowCount","TableBody","row","labelId","iconColor","Fragment","hover","tabIndex","scope","style","paddingBottom","paddingTop","colSpan","TablePagination","rowsPerPageOptions","count","onPageChange","newPage","onRowsPerPageChange","parseInt","options","manipulation","enabled","editNode","nodeData","callback","fixed","x","interaction","hoverConnectedEdges","selectConnectedEdges","selectable","edges","chosen","smooth","arrowStrikethrough","arrows","from","border","shape","borderWidth","labelHighlightBold","font","strokeWidth","physics","hierarchicalRepulsion","damping","springLength","solver","minVelocity","Popup","latestVersion","justifications","header","flexFlow","canvas","NetworkGraph","visJsRef","useRef","mergedGraph","findAllNodesOnAllPaths","set","convertedNodes","DataSet","popup","document","createElement","ReactDOM","render","add","visData","visEdges","network","current","Network","networkCanvas","getElementById","getElementsByTagName","on","changeCursor","isCluster","newCursorStyle","cursor","ref","SelectedPackage","selectedKey","dependents","parents","reasons","reason","Link","underline","package","thoth","advisory","NetworkGraphView","AdvisePage","setSearch","s","Node","this","Set","has","Array","Graph","Map","vertex","source","destination","sourceNode","destinationNode","addAdjacent","isAdjacent","first","visited","visitList","pop","shift","getAdjacents","adj","path","newPath","nextPath","findPath","parent","paths","findAllPaths","useLockFileToGraph","stateName","graph","replace","addVertex","notRoot","deps","dep","adjacentNode","addEdge","requires_dist","split","app","adjs","min","discoverPackageChanges","justifiedPackages","package_name","start","packages","reasonNodes","oldVersion","whyRemoved","useComputeMetrics","os_release","python","implementation_name","major","minor","micro","document_id","analyzer","analyzer_version","products","licenseData","setLicenseData","bfs","graphSearch","packageLicenses","classifier","classifiers","parsed","generalLicense","specificLicense","found","find","l","lower","licenseId","specific","flexGrow","maxWidth","paddingRight","paddingLeft","Dashboard","location","useParams","setValue","pollingTime","setPollingTime","getStatus","thothAdviseResult","result","error_msg","parameters","project","delay","savedCallback","setInterval","clearInterval","useInterval","requirements_locked","initProject","adviseGraph","initGraph","oldGraph","newGraph","useTheme","visGraphEdges","combinedNode","lockfile","success","to","useMergeGraphs","Tabs","newValue","indicatorColor","textColor","Tab","PackageHeader","package_data","all_versions","latest_version","PackageOverview","package_version","pypi_data","releases","compareVersions","yanked","upload_time","isThoth","RouterConfig","exact","reducer","packageWarning","initState","focus","createContext","App","useReducer","ThemeProvider","CssBaseline","basename","Provider","StrictMode"],"mappings":"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","file":"static/js/main.e6ac9ffa.chunk.js","sourcesContent":["import { createTheme } from \"@material-ui/core/styles\";\n\nexport const themeLight = createTheme({\n  palette: {\n    background: {\n      default: \"#f9f9f9\"\n    },\n    primary: {\n      light: \"#f5a733\",\n      main: \"#f39200\",\n      dark: \"#aa6600\"\n    },\n    secondary: {\n      light: \"#72cdee\",\n      main: \"#4fc1ea\",\n      dark: \"#3787a3\"\n    },\n    text: {\n      priamry: \"#363636\",\n      secondary: \"#999\"\n    }\n  },\n  typography: {\n    fontFamily: [\"open sans\", \"sans-serif\"],\n    h4: {\n      fontWeight: 700,\n      fontSize: \"3rem\",\n      color: \"#363636\",\n      lineHeight: 1.125\n    },\n    h5: {\n      fontWeight: 600,\n      fontSize: \"2rem\",\n      lineHeight: 1.125,\n      color: \"#363636\"\n    },\n    h6: {\n      fontWeight: 600,\n      fontSize: \"1.2rem\",\n      color: \"#444f60\",\n      lineHeight: 1.5\n    },\n\n    body1: {\n      fontWeight: 400,\n      fontSize: \"1.25rem\",\n      lineHeight: 1.25,\n      color: \"#000\"\n    },\n\n    body2: {\n      fontWeight: 400,\n      fontSize: \"1rem\",\n      lineHeight: 1.5,\n      color: \"#000\"\n    },\n    subtitle1: {\n      fontWeight: 400,\n      fontSize: \"1.25rem\",\n      lineHeight: 1.25,\n      color: \"#999\"\n    },\n\n    subtitle2: {\n      fontWeight: 400,\n      fontSize: \"1rem\",\n      lineHeight: 1.5,\n      color: \"#999\"\n    }\n    //\n    // button: {\n    //   fontFamily: [\"Roboto\", \"Helvetica\", \"Arial\", \"sans-serif\"],\n    //   fontWeight: 500,\n    //   fontSize: \"0.875rem\",\n    //   lineHeight: 1.75,\n    //   letterSpacing: \"0.02857em\",\n    //   textTransform: \"uppercase\"\n    // }\n  }\n});\n","import { Typography } from \"@material-ui/core\";\n\nexport const NotFound = ({ text }) => {\n  return <Typography variant=\"h2\">404: {text ?? \"page\"} not found!</Typography>;\n};\n\nexport default NotFound;\n","// material ui\nimport { Typography, Box, Paper, InputBase } from \"@material-ui/core\";\n\n// react\nimport PropTypes from \"prop-types\";\n\nconst SearchBar = props => {\n  const {\n    onChange,\n    label,\n    helpertext,\n    boxprops,\n    error = false,\n    lefticon,\n    righticon\n  } = props;\n\n  return (\n    <Box>\n      <Typography\n        variant={\"body1\"}\n        sx={{ color: error ? \"error.main\" : \"text.secondary\" }}\n      >\n        {label}\n      </Typography>\n      <Paper\n        component=\"form\"\n        variant=\"outlined\"\n        sx={{\n          p: \"8px 4px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          borderColor: error ? \"red\" : undefined\n        }}\n        {...boxprops}\n      >\n        {lefticon}\n        <InputBase\n          sx={{ ml: 1, flex: 1 }}\n          placeholder={helpertext}\n          error={error}\n          onChange={e => onChange(e.target.value)}\n          {...props}\n        />\n        {righticon}\n      </Paper>\n    </Box>\n  );\n};\n\nSearchBar.propTypes = {\n  label: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  helpertext: PropTypes.string,\n  error: PropTypes.bool\n};\n\nexport default SearchBar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst TabPanel = ({ children, value, index, ...props }) => {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      className={`${props.className}`}\n      {...props}\n    >\n      {value === index && children}\n    </div>\n  );\n};\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nexport default TabPanel;\n","export default __webpack_public_path__ + \"static/media/thoth-logo.1a28a729.png\";","export const PYPI = \"https://pypi.org/pypi\";\nexport const THOTH = \"https://stage.thoth-station.ninja/api/v1\";\nexport const LICENSES =\n  \"https://raw.githubusercontent.com/spdx/license-list-data/master/json/licenses.json\";\n","import stored_cache from \"assets/cache.json\";\n\nconst STORAGE_KEY = \"thoth-search-cache\";\nconst devMode = true;\n\nexport const cacheGet = (group, key) => {\n  try {\n    if (devMode) {\n      return stored_cache?.[group]?.[key];\n    } else {\n      return JSON.parse(localStorage.getItem(STORAGE_KEY) ?? \"{}\")?.[group]?.[\n        key\n      ];\n    }\n  } catch (error) {\n    cacheReset();\n    return undefined;\n  }\n};\n\nexport const cacheSet = (group, key, value) => {\n  if (devMode) {\n    return;\n  }\n  let cache = JSON.parse(localStorage.getItem(STORAGE_KEY) ?? \"{}\");\n\n  cache[group] = { ...cache[group], [key]: value };\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(cache));\n};\n\nexport const cacheReset = () => {\n  if (devMode) {\n    return;\n  }\n  localStorage.removeItem(STORAGE_KEY);\n};\n","import axios from \"axios\";\nimport { PYPI, THOTH, LICENSES } from \"./CONSTANTS\";\nimport { cacheGet, cacheSet } from \"./apiCache\";\nimport compareVersions from \"tiny-version-compare\";\n\n// GitHub\nexport function getGitHubFileText(githubRepo, fileName) {\n  const url = new URL(githubRepo);\n\n  if (url.hostname === \"github.com\") {\n    return fetch(\n      \"https://raw.githubusercontent.com\" + url.pathname + \"/master/\" + fileName\n    )\n      .then(response => response.text())\n      .then(response => {\n        return response;\n      });\n  } else return Promise.reject();\n}\n\nexport function getFile(url) {\n  return fetch(url)\n    .then(response => response.text())\n    .then(response => {\n      return response;\n    });\n}\n\nexport function getLicenses() {\n  return getFile(LICENSES).then(text => JSON.parse(text));\n}\n\n// pypi\nexport const searchForPackage = (name, version) => {\n  return axios.get(\n    PYPI + \"/\" + name + (version ? \"/\" + version : \"\") + \"/json\"\n  );\n};\n\nexport const thothSearchForPackage = (\n  name,\n  version,\n  index = \"https://pypi.org/simple\"\n) => {\n  // grab from cache if available\n  const cache = cacheGet(\"metadata\", name + version);\n  if (cache) {\n    return Promise.resolve(cache);\n  }\n\n  return axios\n    .get(THOTH + \"/python/package/metadata\", {\n      params: {\n        name: name,\n        version: version,\n        index: index\n      },\n      headers: {\n        accept: \"application/json\"\n      }\n    })\n    .then(res => {\n      cacheSet(\"metadata\", name + version, res.data.metadata);\n      return res.data.metadata;\n    })\n    .catch(e => {\n      if (e?.response?.status === 404 || e?.isAxiosError) {\n        return axios\n          .get(PYPI + \"/\" + name + (version ? \"/\" + version : \"\") + \"/json\")\n          .then(res => {\n            return res.data.info;\n          });\n      } else {\n        throw e;\n      }\n    });\n};\n\n// thoth\nexport const thothAdvise = (pipfile, pipfileLock) => {\n  const d = {\n    application_stack: {\n      requirements: pipfile,\n      requirements_format: \"pipenv\",\n      requirements_lock: pipfileLock\n    },\n    runtime_environment: {\n      operating_system: {\n        name: \"ubi\",\n        version: \"8\"\n      },\n      platform: \"linux-x86_64\",\n      python_version: \"3.9\"\n    }\n  };\n\n  return axios.post(THOTH + \"/advise/python\", d, {\n    params: {\n      recommendation_type: \"stable\",\n      force: true\n    },\n    headers: {\n      accept: \"application/json\"\n    }\n  });\n};\n\nexport const thothAdviseResult = analysis_id => {\n  // grab from cache if available\n  const cache = cacheGet(\"adviseResult\", analysis_id);\n\n  if (cache) {\n    return Promise.resolve(cache);\n  }\n\n  return axios\n    .get(THOTH + \"/advise/python/\" + analysis_id, {\n      headers: {\n        accept: \"application/json\"\n      }\n    })\n    .then(response => {\n      cacheSet(\"adviseResult\", analysis_id, response);\n      return response;\n    });\n};\n\nexport const thothAdviseStatus = analysis_id => {\n  return axios.get(THOTH + \"/advise/python/\" + analysis_id + \"/status\", {\n    headers: {\n      accept: \"application/json\"\n    }\n  });\n};\n\nexport const thothGetDependencies = (\n  name,\n  version,\n  index = \"https://pypi.org/simple\"\n) => {\n  // grab from cache if available\n  const cache = cacheGet(\"dependencies\", name + version);\n  if (cache) {\n    return Promise.resolve(cache);\n  }\n\n  return axios\n    .get(THOTH + \"/python/package/dependencies\", {\n      params: {\n        name: name,\n        version: version,\n        index: index\n      },\n      //timeout: 5000,\n      headers: {\n        accept: \"application/json\"\n      }\n    })\n    .then(response => {\n      cacheSet(\"dependencies\", name + version, response);\n      return response;\n    });\n};\n\nexport const thothGetLatestVersion = (name, version) => {\n  return axios\n    .get(THOTH + \"/python/package/versions\", {\n      params: {\n        name: name\n      },\n      timeout: 5000,\n      headers: {\n        accept: \"application/json\"\n      }\n    })\n    .then(res => {\n      if (res.data.versions.length === 0) {\n        return null;\n      } else {\n        const sorted = res.data.versions.sort(function(a, b) {\n          return compareVersions(a.package_version, b.package_version);\n        });\n\n        // compare to version if supplied\n        if (version && sorted.includes(version)) {\n          return version;\n        }\n\n        return sorted[sorted.length - 1].package_version;\n      }\n    })\n    .catch(() => {\n      return null;\n    });\n};\n","// react\nimport React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\n// material-ui\nimport { Typography, Button, Box, Grid } from \"@material-ui/core\";\nimport LoadingButton from \"@material-ui/lab/LoadingButton\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport ToggleButtonGroup from \"@material-ui/lab/ToggleButtonGroup\";\nimport SearchRoundedIcon from \"@mui/icons-material/SearchRounded\";\n\n// local\nimport { ADVISE, PACKAGE } from \"navigation/CONSTANTS\";\nimport SearchBar from \"components/shared/SearchBar\";\nimport TabPanel from \"components/shared/TabPanel\";\nimport logo from \"assets/thoth-logo.png\";\n\n// redux\nimport { DispatchContext } from \"App\";\n\n// api\nimport { thothAdvise, searchForPackage } from \"services/thothApi\";\n\nconst Home = () => {\n  const history = useHistory();\n  const dispatch = useContext(DispatchContext);\n\n  // textbox states\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [pipfileQuery, setPipfileQuery] = useState(\"\");\n  const [pipfileLockQuery, setPipfileLockQuery] = useState(\"\");\n\n  // textbox errors\n  const [searchError, setSearchError] = useState(\"\");\n  const [pipfileError, setPipfileError] = useState(\"\");\n  const [pipfileLockError, setPipfileLockError] = useState(\"\");\n\n  // utlity states\n  const [mode, setMode] = useState(\"multiple\");\n\n  const [queryLoading, setQueryLoading] = useState(false);\n\n  // handle textbox state change\n  const handleChange = (e, box) => {\n    switch (box) {\n      case \"single\":\n        setSearchQuery(e.target.value);\n        if (searchError !== \"\") {\n          setSearchError(\"\");\n        }\n        break;\n      case \"pipfile\":\n        setPipfileQuery(e.target.value);\n        if (pipfileError !== \"\") {\n          setPipfileError(\"\");\n        }\n        break;\n      case \"lock\":\n        setPipfileLockQuery(e.target.value);\n        if (pipfileLockError !== \"\") {\n          setPipfileLockError(\"\");\n        }\n        break;\n      default:\n    }\n  };\n\n  // change mode view\n  const handleMode = (event, newMode) => {\n    if (newMode) {\n      setMode(newMode);\n    }\n  };\n\n  // handle the input\n  const handleAnalyze = async () => {\n    if (mode === \"single\") {\n      // if no query\n      if (searchQuery === \"\") {\n        return;\n      }\n\n      searchForPackage(searchQuery)\n        .then(response => {\n          history.push(PACKAGE + \"/\" + response.data.info.name);\n        })\n        .catch(e => {\n          setSearchError(\"Package does not exist\");\n        });\n    }\n    // if using pipfile and pipfile.lock\n    else {\n      // if no query\n      if (\n        pipfileQuery === \"\" ||\n        pipfileLockQuery === \"\" ||\n        pipfileError !== \"\" ||\n        pipfileLockError !== \"\"\n      ) {\n        return;\n      }\n\n      let fail = false;\n      if (!pipfileQuery) {\n        fail = true;\n        setPipfileError(\"Please provide a Pipfile\");\n      }\n      if (!pipfileLockQuery) {\n        fail = true;\n        setPipfileLockError(\"Please provide a Pipfile.lock\");\n      }\n\n      // if able to parse both\n      if (!fail) {\n        setQueryLoading(true);\n        thothAdvise(pipfileQuery, pipfileLockQuery)\n          .then(response => {\n            setQueryLoading(false);\n            dispatch({\n              type: \"advise\",\n              param: \"analysis_id\",\n              payload: response.data.analysis_id\n            });\n            history.push(ADVISE + \"/\" + response.data.analysis_id);\n          })\n          .catch(error => {\n            setQueryLoading(false);\n            if (error.response.status === 400) {\n              if (error.response.data.error.includes(\"Pipfile.lock\")) {\n                setPipfileLockError(\"Failed to parse provided Pipfile.lock\");\n              } else if (error.response.data.error.includes(\"Pipfile\")) {\n                setPipfileError(\"Failed to parse provided Pipfile\");\n              }\n            }\n          });\n      }\n    }\n  };\n\n  return (\n    <Grid container justifyContent=\"center\">\n      <Grid item>\n        <Button sx={{ marginTop: 10 }}>\n          <img alt=\"Thoth Logo\" src={logo} height={300} width={\"100%\"} />\n        </Button>\n      </Grid>\n      <Grid container item justifyContent=\"center\" mt={5} spacing={0}>\n        <Grid container item xs={3} align=\"center\" mr={5}>\n          <Grid item xs={12} align=\"left\" mb={3}>\n            <Typography variant=\"h4\">\n              <b>Thoth Search</b>\n            </Typography>\n          </Grid>\n          <Grid item xs={12} align=\"left\">\n            <Typography variant=\"subtitle1\">\n              Thoth Search is a tool that runs analysis on a Python application.\n              It utilizes package metadata and Thoth Adviser to analyse and\n              recommend a software stack. You can run analysis on a on an entire\n              Python application using a properly formatted Pipfile and\n              Pipfile.lock. Alternatively, you can analyse a single Python\n              package to see what Thoth knows about the package.\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Grid\n          item\n          container\n          xs={2}\n          direction=\"column\"\n          justifyContent=\"center\"\n          spacing={1}\n        >\n          {[\n            [\"One\", \"100k\"],\n            [\"Two\", \"20%\"],\n            [\"Three\", \"62\"],\n            [\"Four\", \"N/A\"]\n          ].map(stat => {\n            return (\n              <Grid item container alignItems=\"center\">\n                <Grid item xs={6}>\n                  <Typography variant=\"h6\">\n                    <b>Thoth Statistic {stat[0]}</b>\n                  </Typography>\n                </Grid>\n                <Grid item xs={4}>\n                  <Typography variant=\"h5\" align=\"right\">\n                    {stat[1]}\n                  </Typography>\n                </Grid>\n              </Grid>\n            );\n          })}\n        </Grid>\n\n        <Grid item xs={12} align=\"center\" mt={3} mb={4}>\n          <ToggleButtonGroup\n            value={mode}\n            exclusive\n            onChange={handleMode}\n            size={\"large\"}\n          >\n            <ToggleButton value=\"single\">\n              <b>single package analysis</b>\n            </ToggleButton>\n            <ToggleButton value=\"multiple\">\n              <b>Python application analysis</b>\n            </ToggleButton>\n          </ToggleButtonGroup>\n        </Grid>\n\n        <Grid item xs={5}>\n          <TabPanel value={mode} index={\"single\"}>\n            <Grid container>\n              <Grid item xs={10}>\n                <Typography\n                  color=\"error\"\n                  variant=\"body1\"\n                  sx={{ minHeight: 30 }}\n                >\n                  {searchError ?? \"\"}\n                </Typography>\n              </Grid>\n              <Grid item xs={10}>\n                <SearchBar\n                  error={searchError !== \"\"}\n                  onChange={e => handleChange(e, \"single\")}\n                  helpertext={\"Search for a Python package\"}\n                  type=\"search\"\n                  boxprops={{ mr: 2 }}\n                  lefticon={<SearchRoundedIcon />}\n                />\n              </Grid>\n              <Grid item sm={10} lg={1} ml={2}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={() => handleAnalyze()}\n                  sx={{ minHeight: \"100%\", minWidth: \"100%\" }}\n                >\n                  <b>Analyze</b>\n                </Button>\n              </Grid>\n            </Grid>\n          </TabPanel>\n\n          <TabPanel value={mode} index={\"multiple\"}>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <SearchBar\n                  label={\n                    pipfileError !== \"\" ? pipfileError : \"Pipfile contents\"\n                  }\n                  onChange={e => handleChange(e, \"pipfile\")}\n                  error={pipfileError !== \"\"}\n                  multiline\n                  rows={8}\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <SearchBar\n                  label={\n                    pipfileLockError !== \"\"\n                      ? pipfileLockError\n                      : \"Pipfile.lock contents\"\n                  }\n                  onChange={e => handleChange(e, \"lock\")}\n                  error={pipfileLockError !== \"\"}\n                  multiline\n                  rows={8}\n                />\n              </Grid>\n            </Grid>\n\n            <Box textAlign=\"center\" mt={2}>\n              <LoadingButton\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => handleAnalyze()}\n                loading={queryLoading}\n                sx={{ minHeight: \"100%\", minWidth: \"100%\" }}\n              >\n                <b>Analyze</b>\n              </LoadingButton>\n            </Box>\n          </TabPanel>\n        </Grid>\n        <div bgcolor=\"#444f60\" minHeight=\"300px\" mt={5}></div>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Home;\n","// react\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// material-ui\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Card, CardContent, CardHeader, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    height: \"100%\"\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nconst InfoCard = ({ cardMeta, cardBody, cardAction }) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        action={cardAction}\n        title={<Typography variant=\"h5\">{cardMeta.title}</Typography>}\n        subheader={cardMeta.subTitle}\n      />\n      <CardContent>{cardBody}</CardContent>\n    </Card>\n  );\n};\n\nInfoCard.propTypes = {\n  cardMeta: PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    subTitle: PropTypes.string,\n    action: PropTypes.element\n  }),\n  cardBody: PropTypes.element\n};\n\nexport default InfoCard;\n","// react\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// material-ui\nimport { withStyles, makeStyles } from \"@material-ui/styles\";\nimport { LinearProgress, Typography, Grid } from \"@material-ui/core\";\n\nconst CustomLinearProgress = withStyles(theme => ({\n  root: {\n    height: 10,\n    borderRadius: 5\n  },\n  colorPrimary: {\n    backgroundColor:\n      theme.palette.grey[theme.palette.type === \"light\" ? 200 : 700]\n  },\n  bar: {\n    borderRadius: 5,\n    backgroundColor: \"#1a90ff\"\n  }\n}))(LinearProgress);\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(6,1fr)\",\n    alignItems: \"center\",\n    gridGap: theme.spacing(1)\n  },\n  label: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\"\n  },\n  value: {\n    textAlign: \"end\"\n  }\n}));\n\nconst ProgressBar = ({ value, total, label, action, ...props }) => {\n  const classes = useStyles();\n  return (\n    <Grid container spacing={1} alignItems=\"center\">\n      <Grid item xs={5}>\n        <Typography variant=\"body2\" className={classes.label}>\n          {label}\n        </Typography>\n      </Grid>\n      <Grid item xs={1.75}>\n        <Typography className={classes.value} variant=\"body2\">\n          {value}\n        </Typography>\n      </Grid>\n      <Grid item xs>\n        <CustomLinearProgress\n          variant=\"determinate\"\n          value={total > 0 ? (value / total) * 100 : 0}\n        />\n      </Grid>\n      <Grid item xs={1}>\n        <div>{action ?? null}</div>\n      </Grid>\n    </Grid>\n  );\n};\n\nProgressBar.propTypes = {\n  value: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n  label: PropTypes.string\n};\n\nexport default ProgressBar;\n","import { Typography } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\n\nconst ErrorText = ({ text }) => {\n  return (\n    <Typography align=\"center\" color=\"error\" variant=\"body1\">\n      {text}\n    </Typography>\n  );\n};\n\nErrorText.propTypes = {\n  text: PropTypes.string.isRequired\n};\n\nexport default ErrorText;\n","// react\nimport React from \"react\";\n\n// material ui\nimport { CircularProgress, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\n\n// component styling\n\nconst useStyles = makeStyles(theme => ({\n  customProgressRoot: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  }\n}));\n\nconst CustomProgress = ({ amount, note }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.customProgressRoot}>\n      <CircularProgress\n        variant={amount ? \"determinate\" : \"indeterminate\"}\n        value={amount ?? 0}\n      />\n      {note ? (\n        <Typography align=\"center\" variant=\"body1\">\n          {note}\n        </Typography>\n      ) : null}\n    </div>\n  );\n};\n\nexport default CustomProgress;\n","// react\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// local\nimport ErrorPage from \"./ErrorPage\";\nimport CustomProgress from \"./CustomProgress\";\n\nconst LoadingErrorTemplate = ({\n  isError,\n  isLoading,\n  errorText,\n  loadingPage,\n  loadingAmount,\n  loadingText,\n  children\n}) => {\n  const renderChoice = () => {\n    if (isError) {\n      return <ErrorPage text={errorText ?? \"A unknown error occured\"} />;\n    } else if (isLoading) {\n      return (\n        loadingPage ?? (\n          <CustomProgress amount={loadingAmount} note={loadingText} />\n        )\n      );\n    } else {\n      return children;\n    }\n  };\n\n  return <>{renderChoice()}</>;\n};\n\nLoadingErrorTemplate.propTypes = {\n  state: PropTypes.any\n};\n\nexport default LoadingErrorTemplate;\n","// react\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// local\nimport ProgressBar from \"components/shared/ProgressBar\";\n\n// Shared\nimport LoadingErrorTemplate from \"components/shared/LoadingErrorTemplate\";\n\n// material-ui\nimport { TransitionGroup } from \"react-transition-group\";\n\nimport {\n  Typography,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  Grid,\n  Collapse\n} from \"@material-ui/core/\";\n\nconst DependenciesMetric = ({ metric }) => {\n  const totalDependencies =\n    (metric?.all?.direct ?? 0) +\n    (metric?.all?.indirect ?? 0) +\n    (metric?.all?.roots ?? 0);\n\n  return (\n    <LoadingErrorTemplate isLoading={!metric}>\n      <Typography variant=\"h6\" gutterBottom>\n        All Packages\n      </Typography>\n      <Divider mb={1} />\n      <ProgressBar\n        value={metric?.all?.roots ?? 0}\n        total={totalDependencies}\n        label={\"Root\"}\n        mb={1}\n      />\n      <ProgressBar\n        value={metric?.all?.direct ?? 0}\n        total={totalDependencies}\n        label={\"Direct\"}\n        mb={1}\n      />\n      <ProgressBar\n        value={metric?.all?.indirect ?? 0}\n        total={totalDependencies}\n        label={\"Indirect\"}\n      />\n      <Typography variant=\"h6\" gutterBottom mt={2}>\n        Root Packages\n      </Typography>\n      <Divider mb={1} />\n      <List component=\"nav\">\n        <TransitionGroup>\n          {Object.entries(metric?.roots ?? {})?.map(([key, value], i) => {\n            const t =\n              (metric.roots[key].direct ?? 0) +\n              (metric.roots[key].indirect ?? 0);\n            return (\n              <Collapse key={key}>\n                <div>\n                  <ListItem>\n                    <Grid container alignItems=\"center\">\n                      <Grid item xs>\n                        <ListItemText primary={key} />\n                      </Grid>\n                      <Grid item xs>\n                        <Grid container direction=\"column\">\n                          <Grid item xs>\n                            <ProgressBar\n                              value={metric?.roots?.[key]?.direct ?? 0}\n                              total={t}\n                              label={\"Direct\"}\n                            />\n                          </Grid>\n                          <Grid item xs>\n                            <ProgressBar\n                              value={metric?.roots?.[key]?.indirect ?? 0}\n                              total={t}\n                              label={\"Indirect\"}\n                            />\n                          </Grid>\n                        </Grid>\n                      </Grid>\n                    </Grid>\n                  </ListItem>\n                  <Divider variant={\"middle\"} mb={1} />\n                </div>\n              </Collapse>\n            );\n          })}\n        </TransitionGroup>\n      </List>\n    </LoadingErrorTemplate>\n  );\n};\n\nDependenciesMetric.propTypes = {\n  metric: PropTypes.shape({\n    all: PropTypes.shape({\n      direct: PropTypes.number,\n      indirect: PropTypes.number,\n      roots: PropTypes.number\n    })\n  })\n};\n\nexport default DependenciesMetric;\n","import React from \"react\";\n\n// material-ui\nimport { Divider, Collapse, Chip, Grid, Box } from \"@material-ui/core\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport CheckRoundedIcon from \"@material-ui/icons/CheckRounded\";\nimport HelpOutlineRoundedIcon from \"@material-ui/icons/HelpOutlineRounded\";\n\n// local\nimport ProgressBar from \"components/shared/ProgressBar\";\n\nconst LicenseGroup = ({ name, value, totalLicenses }) => {\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <Grid container>\n      <Grid item xs={1}>\n        {value._meta.isOsiApproved === null ? (\n          <HelpOutlineRoundedIcon />\n        ) : value._meta.isOsiApproved ? (\n          <CheckRoundedIcon />\n        ) : null}\n      </Grid>\n      <Grid item xs>\n        <Box onClick={() => setOpen(!open)}>\n          <ProgressBar\n            key={name}\n            value={Object.keys(value).length - 1 ?? 0}\n            total={totalLicenses}\n            label={name}\n            action={open ? <ExpandLess /> : <ExpandMore />}\n          />\n        </Box>\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\n          <Box my={1}>\n            {Object.entries(value)\n              .sort((a, b) => {\n                return a[1] - b[1];\n              })\n              .map(([k, v]) => {\n                if (k[0] === \"_\") {\n                  return null;\n                }\n                return (\n                  <Chip\n                    key={k}\n                    sx={{ margin: 0.5 }}\n                    color={\n                      v.depth === 0\n                        ? \"primary\"\n                        : v.depth === 1\n                        ? \"secondary\"\n                        : \"default\"\n                    }\n                    label={k}\n                  />\n                );\n              })}\n          </Box>\n          <Divider />\n        </Collapse>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default LicenseGroup;\n","// react\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// material-ui\nimport {\n  Typography,\n  Divider,\n  Collapse,\n  Button,\n  Box,\n  Grid\n} from \"@material-ui/core\";\nimport { TransitionGroup } from \"react-transition-group\";\n\n// local\nimport LoadingErrorTemplate from \"components/shared/LoadingErrorTemplate\";\nimport LicenseGroup from \"./LicenseGroup\";\n\nconst LicenseMetric = ({ metric, deepError }) => {\n  const [more, setMore] = React.useState(false);\n\n  const licenses = useMemo(\n    () =>\n      Object.entries(metric?.all ?? {}).sort((a, b) => {\n        return Object.keys(b[1]).length - Object.keys(a[1]).length;\n      }),\n    [metric?.all]\n  );\n\n  const totalLicenses = useMemo(\n    () =>\n      Object.entries(metric?.all ?? {}).reduce((sum, key) => {\n        return sum + Object.keys(key[1]).length;\n      }, 0),\n    [metric?.all]\n  );\n\n  return (\n    <div>\n      <Grid container>\n        <Grid item xs={1}>\n          <Typography variant=\"h6\" gutterBottom>\n            OSI\n          </Typography>\n        </Grid>\n        <Grid item xs>\n          <Typography variant=\"h6\" gutterBottom>\n            Dependency Licenses\n          </Typography>\n        </Grid>\n      </Grid>\n\n      <Divider />\n      <LoadingErrorTemplate\n        state={deepError ? \"error\" : metric?.all}\n        errorText=\"Could not run analysis on dependencies.\"\n      >\n        <TransitionGroup>\n          {licenses?.slice(0, 10).map(([key, value]) => {\n            return (\n              <Collapse key={key}>\n                <LicenseGroup\n                  name={key}\n                  value={value}\n                  totalLicenses={totalLicenses}\n                />\n              </Collapse>\n            );\n          })}\n        </TransitionGroup>\n\n        <Collapse in={more} timeout=\"auto\" unmountOnExit>\n          <TransitionGroup>\n            {licenses.slice(10).map(([key, value]) => {\n              return (\n                <Collapse key={key}>\n                  <LicenseGroup\n                    name={key}\n                    value={value}\n                    totalLicenses={totalLicenses}\n                  />\n                </Collapse>\n              );\n            })}\n          </TransitionGroup>\n        </Collapse>\n        <Box textAlign=\"center\">\n          <Button onClick={() => setMore(!more)} color=\"primary\">\n            {more ? \"Less\" : \"More\"}\n          </Button>\n        </Box>\n      </LoadingErrorTemplate>\n    </div>\n  );\n};\n\nLicenseMetric.propTypes = {\n  props: PropTypes.shape({\n    metric: PropTypes.shape({\n      total: PropTypes.number,\n      all: PropTypes.object\n    }).isRequired\n  })\n};\n\nexport default LicenseMetric;\n","// react\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// material-ui\nimport { Typography, Divider } from \"@material-ui/core\";\n\n// local\nimport ProgressBar from \"components/shared/ProgressBar\";\n\n// Shared\nimport LoadingErrorTemplate from \"components/shared/LoadingErrorTemplate\";\n\nconst AdviseMetric = ({ metric }) => {\n  const total =\n    metric?.added + metric?.removed + metric?.version + metric?.unchanged;\n\n  return (\n    <LoadingErrorTemplate isLoading={!metric}>\n      <Typography variant=\"body2\" gutterBottom>\n        {metric?.build}\n      </Typography>\n      <Typography variant=\"h6\" gutterBottom mt={2}>\n        What Thoth Changed\n      </Typography>\n      <Divider mb={1} />\n      <ProgressBar\n        value={metric?.added ?? 0}\n        total={total}\n        label={\"Added Packages\"}\n        mb={1}\n      />\n      <ProgressBar\n        value={metric?.removed ?? 0}\n        total={total}\n        label={\"Removed Packages\"}\n        mb={1}\n      />\n      <ProgressBar\n        value={metric?.version ?? 0}\n        total={total}\n        label={\"Version Changes\"}\n      />\n      <Typography variant=\"h6\" mt={3} gutterBottom>\n        Noteworthy Justifications\n      </Typography>\n      <Divider mb={1} />\n      {Object.entries(metric?.justification ?? {}).map(([key, value]) => {\n        return (\n          <Typography variant=\"body2\" gutterBottom key={key}>\n            {key}: {value}\n          </Typography>\n        );\n      })}\n    </LoadingErrorTemplate>\n  );\n};\n\nAdviseMetric.propTypes = {\n  metric: PropTypes.shape({\n    added: PropTypes.number,\n    removed: PropTypes.number,\n    version: PropTypes.number,\n    unchanged: PropTypes.number,\n    justification: PropTypes.object,\n    build: PropTypes.string\n  })\n};\n\nexport default AdviseMetric;\n","import { ToggleButtonGroup, ToggleButton } from \"@material-ui/core\";\n\nconst CustomCardAction = ({ value, onChange }) => {\n  return (\n    <ToggleButtonGroup value={value} exclusive size=\"small\" onChange={onChange}>\n      <ToggleButton value=\"old\">Old</ToggleButton>\n      <ToggleButton value=\"new\">New</ToggleButton>\n    </ToggleButtonGroup>\n  );\n};\n\nexport default CustomCardAction;\n","// React\nimport React, { useContext } from \"react\";\n\n// local components\nimport InfoCard from \"components/shared/InfoCard\";\nimport DependenciesMetric from \"./DependenciesMetric\";\nimport LicenseMetric from \"./LicenseMetric\";\nimport AdviseMetric from \"./AdviseMetric\";\nimport LoadingErrorTemplate from \"components/shared/LoadingErrorTemplate\";\nimport CustomCardAction from \"./CustomCardAction\";\n\n// material-ui\nimport { Grid } from \"@material-ui/core\";\n\n// redux\nimport { StateContext } from \"App\";\n\nconst SummaryPage = () => {\n  const state = useContext(StateContext);\n\n  const [pipfile, setPipfile] = React.useState(\"new\");\n\n  const handlePipfile = (event, newPipfile) => {\n    if (newPipfile?.length) {\n      setPipfile(newPipfile);\n    }\n  };\n\n  return (\n    <LoadingErrorTemplate isLoading={state?.metrics === undefined}>\n      <Grid container spacing={3} mb={3} mt={1}>\n        <Grid item xs={12} md={6}>\n          <InfoCard\n            cardMeta={{\n              title: \"Thoth Advise Summary\"\n            }}\n            cardBody={<AdviseMetric metric={state?.metrics?.advise} />}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <InfoCard\n            cardMeta={{\n              title: \"Dependencies Summary\"\n            }}\n            cardBody={\n              <DependenciesMetric\n                metric={state?.metrics?.[pipfile]?.dependencies}\n              />\n            }\n            cardAction={\n              <CustomCardAction value={pipfile} onChange={handlePipfile} />\n            }\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <InfoCard\n            cardMeta={{\n              title: \"Licenses Summary\"\n            }}\n            cardBody={\n              <LicenseMetric metric={state?.metrics?.[pipfile]?.licenses} />\n            }\n            cardAction={\n              <CustomCardAction value={pipfile} onChange={handlePipfile} />\n            }\n          />\n        </Grid>\n      </Grid>\n    </LoadingErrorTemplate>\n  );\n};\n\nexport default SummaryPage;\n","// material-ui\nimport { Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\n\n// react\nimport PropTypes from \"prop-types\";\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\"\n  }\n}));\n\nconst IconText = ({ text, icon, link, ...props }) => {\n  const classes = useStyles();\n  return (\n    <div className={`${classes.root} ${props.className}`}>\n      {icon}\n      <Typography href={link ? link : null} variant=\"body2\" marginLeft>\n        {text}\n      </Typography>\n    </div>\n  );\n};\n\nexport default IconText;\n\nIconText.propTypes = {\n  text: PropTypes.string.isRequired,\n  icon: PropTypes.element.isRequired,\n  link: PropTypes.string\n};\n","export default function timeSince(date) {\n  var seconds = Math.floor((new Date() - date) / 1000);\n\n  var interval = seconds / 31536000;\n\n  if (interval > 1) {\n    const num = Math.floor(interval);\n    return num + \" year\" + (num !== 1 ? \"s\" : \"\");\n  }\n  interval = seconds / 2592000;\n  if (interval > 1) {\n    const num = Math.floor(interval);\n    return num + \" month\" + (num !== 1 ? \"s\" : \"\");\n  }\n  interval = seconds / 86400;\n  if (interval > 1) {\n    const num = Math.floor(interval);\n    return num + \" day\" + (num !== 1 ? \"s\" : \"\");\n  }\n  interval = seconds / 3600;\n  if (interval > 1) {\n    const num = Math.floor(interval);\n    return num + \" hour\" + (num !== 1 ? \"s\" : \"\");\n  }\n  interval = seconds / 60;\n  if (interval > 1) {\n    const num = Math.floor(interval);\n    return num + \" minute\" + (num !== 1 ? \"s\" : \"\");\n  }\n  const num = Math.floor(seconds);\n  return num + \" second\" + (num !== 1 ? \"s\" : \"\");\n}\n","import timeSince from \"utils/timeSince\";\n\nexport const calcTime = (finished_at, started_at, datetime) => {\n  // if status says finished\n  if (finished_at) {\n    return \"Advise finished \" + timeSince(new Date(finished_at)) + \" ago.\";\n  }\n  // if status is pending\n  else if (started_at) {\n    return \"Advise started \" + timeSince(new Date(started_at)) + \" ago.\";\n  }\n  // if status is nulled so use metadata end date\n  else if (datetime) {\n    return \"Advise finished \" + timeSince(new Date(datetime + \"Z\")) + \" ago.\";\n  } else {\n    return \"Time started/finished not available\";\n  }\n};\n","import { Button, Alert } from \"@material-ui/core\";\n\nconst CustomAlert = ({ info, ...props }) => {\n  return (\n    <Alert\n      className={props.className}\n      action={\n        <Button color=\"inherit\" size=\"small\" href={info.link}>\n          DETAILS\n        </Button>\n      }\n      severity={info.type.toLowerCase()}\n    >\n      {info.message}\n    </Alert>\n  );\n};\n\nexport default CustomAlert;\n","// React\nimport React, { useContext, useMemo } from \"react\";\n\n// material-ui\nimport { Typography, Chip, Button, Collapse } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\n// local\nimport IconText from \"components/shared/IconText\";\n\n// utils\nimport { calcTime } from \"./utils\";\n\n// redux\nimport { StateContext } from \"App\";\n\n// local\nimport CustomAlert from \"./CustomAlert\";\n\n// component styling\n\nconst useStyles = makeStyles(theme => ({\n  titleRow: {\n    display: \"flex\",\n    alignItems: \"center\",\n    marginBottom: theme.spacing(1)\n  },\n  marginLeft: {\n    marginLeft: theme.spacing(2)\n  },\n  marginRight: {\n    marginRight: theme.spacing(2)\n  },\n  linksRow: {\n    display: \"flex\",\n    marginBottom: theme.spacing(3),\n    alignItems: \"center\"\n  },\n  alert: {\n    width: \"100%\",\n    marginTop: theme.spacing(1)\n  }\n}));\n\nconst AdviseHeader = ({ adviseID }) => {\n  const classes = useStyles();\n  const state = useContext(StateContext);\n  const [expandAlerts, setExpandAlerts] = React.useState(false);\n\n  const [statusText, statusColor] = (() => {\n    // if report is done\n    if (state?.advise?.report) {\n      if (state.advise.report.ERROR) {\n        return [\"ERROR\", \"error\"];\n      } else {\n        return [\"COMPLETE\", \"success\"];\n      }\n    }\n    // if report is not done\n    else if (state?.advise?.status?.state) {\n      return [state.advise.status.state.toUpperCase(), \"info\"];\n    } else {\n      return [\"UNKNOWN\", undefined];\n    }\n  })();\n\n  const alerts = useMemo(\n    () =>\n      state?.advise?.report?.stack_info\n        ? state.advise.report.stack_info.filter(alert => {\n            return alert.type === \"ERROR\";\n          })\n        : null,\n    [state?.advise?.report?.stack_info]\n  );\n\n  return (\n    <div>\n      <Typography variant=\"h4\">\n        <b>{adviseID}</b>\n      </Typography>\n      <div className={classes.linksRow}>\n        <Chip label={statusText} color={statusColor} />\n        <IconText\n          className={classes.marginLeft}\n          text={calcTime(\n            state?.advise?.status?.finished_at,\n            state?.advise?.status?.started_at,\n            state?.advise?.metadata?.datetime\n          )}\n          icon={<AccessTimeIcon />}\n        />\n      </div>\n      {alerts?.length > 0 ? (\n        <div>\n          <CustomAlert info={alerts[0]} />\n          <Collapse in={expandAlerts} timeout=\"auto\" unmountOnExit>\n            {alerts?.slice(1).map(info => {\n              return <CustomAlert info={info} className={classes.alert} />;\n            })}\n          </Collapse>\n\n          <Button\n            color=\"inherit\"\n            size=\"small\"\n            onClick={() => setExpandAlerts(!expandAlerts)}\n          >\n            {alerts?.length > 1 ? (expandAlerts ? \"LESS\" : \"MORE\") : null}\n          </Button>\n        </div>\n      ) : null}\n\n      {statusText === \"COMPLETE\" ? (\n        <Typography variant=\"body1\" sx={{ color: \"text.secondary\" }}>\n          Thoth has added and removed packages from the original Pipfile.lock,\n          resulting in a <i>new</i> Pipfile.lock. Switch between the new and old\n          Python environments to see the differences.\n        </Typography>\n      ) : null}\n    </div>\n  );\n};\n\nexport default AdviseHeader;\n","function descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nexport function getComparator(order, orderBy) {\n  return order === \"desc\"\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n","import {\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  Box,\n  TableCell\n} from \"@material-ui/core\";\n\nimport { visuallyHidden } from \"@material-ui/utils\";\n\nimport PropTypes from \"prop-types\";\n\nconst headCells = [\n  {\n    id: \"name\",\n    numeric: false,\n    label: \"Package\"\n  },\n  {\n    id: \"depth\",\n    numeric: true,\n    label: \"Depth\"\n  },\n  {\n    id: \"license\",\n    numeric: false,\n    label: \"License\"\n  },\n  {\n    id: \"dependencies\",\n    numeric: true,\n    label: \"Direct Dependencies\"\n  }\n];\n\nfunction EnhancedTableHead(props) {\n  const { order, orderBy, onRequestSort } = props;\n  const createSortHandler = property => event => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {headCells.map(headCell => (\n          <TableCell\n            key={headCell.id}\n            align={headCell.numeric ? \"right\" : \"left\"}\n            padding=\"normal\"\n            sortDirection={orderBy === headCell.id ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === headCell.id}\n              direction={orderBy === headCell.id ? order : \"asc\"}\n              onClick={createSortHandler(headCell.id)}\n            >\n              {headCell.label}\n              {orderBy === headCell.id ? (\n                <Box component=\"span\" sx={visuallyHidden}>\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\n                </Box>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  onRequestSort: PropTypes.func.isRequired,\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\n  orderBy: PropTypes.string.isRequired\n};\n\nexport default EnhancedTableHead;\n","import React, { useEffect, useState } from \"react\";\n\nimport {\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n  Typography\n} from \"@material-ui/core\";\n\nimport AddRoundedIcon from \"@material-ui/icons/AddRounded\";\nimport RemoveRoundedIcon from \"@material-ui/icons/RemoveRounded\";\nimport CircleOutlinedIcon from \"@material-ui/icons/CircleOutlined\";\n\n// utils\nimport { getComparator, stableSort } from \"./utils\";\n\n// local\nimport EnhancedTableHead from \"./EnhancedTableHead\";\n\nexport default function AdviseTableView({\n  search,\n  filteredGraph,\n  setSelected,\n  selected\n}) {\n  const [order, setOrder] = useState(\"asc\");\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n  const [rows, setRows] = React.useState([]);\n\n  // format data\n  useEffect(() => {\n    if (!filteredGraph) {\n      return;\n    }\n\n    setPage(0);\n\n    const newRows = [];\n    filteredGraph.nodes.forEach(node => {\n      if (node.value.depth === -1) {\n        return;\n      }\n      newRows.push({\n        name: node.value.label,\n        key: node.key,\n        warnings: [],\n        depth: node.value.depth,\n        license: node?.value?.metadata?.license,\n        dependencies: node.adjacents.size,\n        change: node.value.change,\n        summary: node?.value?.metadata?.summary\n      });\n    });\n    setRows(newRows);\n  }, [filteredGraph]);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === \"asc\";\n    setOrder(isAsc ? \"desc\" : \"asc\");\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Avoid a layout jump when reaching the last page with empty rows.\n  const emptyRows =\n    page > 0 ? Math.max(0, (1 + page) * rowsPerPage - rows.length) : 0;\n\n  return (\n    <Box sx={{ width: \"100%\" }}>\n      <TableContainer>\n        <Table sx={{ minWidth: 750 }} size=\"medium\">\n          <EnhancedTableHead\n            order={order}\n            orderBy={orderBy}\n            onRequestSort={handleRequestSort}\n            rowCount={rows.length}\n          />\n          <TableBody>\n            {stableSort(rows, getComparator(order, orderBy))\n              .filter(row => row.name.includes(search))\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((row, index) => {\n                const labelId = `enhanced-table-checkbox-${index}`;\n\n                const iconColor =\n                  row.change === \"removed\"\n                    ? \"error\"\n                    : row.change === \"added\"\n                    ? \"success\"\n                    : undefined;\n\n                return (\n                  <React.Fragment key={row.name}>\n                    <TableRow\n                      hover\n                      onClick={() => setSelected(row.key)}\n                      tabIndex={-1}\n                      selected={selected === row.key}\n                    >\n                      <TableCell component=\"th\" id={labelId} scope=\"row\">\n                        <Box display=\"flex\">\n                          {row.change === \"removed\" ? (\n                            <RemoveRoundedIcon color={iconColor} />\n                          ) : row.change === \"added\" ? (\n                            <AddRoundedIcon color={iconColor} />\n                          ) : (\n                            <CircleOutlinedIcon />\n                          )}\n                          <Typography ml={2}>{row.name}</Typography>\n                        </Box>\n                      </TableCell>\n                      <TableCell align=\"right\">{row.depth}</TableCell>\n                      <TableCell align=\"right\">{row.license}</TableCell>\n                      <TableCell align=\"right\">{row.dependencies}</TableCell>\n                    </TableRow>\n\n                    <TableRow>\n                      <TableCell\n                        style={{ paddingBottom: 0, paddingTop: 0 }}\n                        colSpan={6}\n                      ></TableCell>\n                    </TableRow>\n                  </React.Fragment>\n                );\n              })}\n            {emptyRows > 0 && (\n              <TableRow\n                style={{\n                  height: 53 * emptyRows\n                }}\n              >\n                <TableCell colSpan={6} />\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25]}\n        component=\"div\"\n        count={rows.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Box>\n  );\n}\n","export const options = {\n  manipulation: {\n    enabled: false,\n    editNode: function(nodeData, callback) {\n      nodeData.fixed = !nodeData.fixed.x;\n      callback(nodeData);\n    }\n  },\n  interaction: {\n    hover: true,\n    hoverConnectedEdges: false,\n    selectConnectedEdges: false,\n    selectable: true\n  },\n  edges: {\n    chosen: false,\n    smooth: false,\n    color: {\n      color: \"#5c6470\"\n    },\n    arrowStrikethrough: false,\n    arrows: {\n      from: {\n        enabled: true,\n        type: \"triangle\"\n      }\n    }\n  },\n\n  nodes: {\n    chosen: false,\n    color: {\n      background: \"#5c6470\",\n      border: \"#fff\",\n      hover: {\n        background: \"#f39200\",\n        border: \"#fff\"\n      }\n    },\n    shape: \"dot\",\n    size: 10,\n    borderWidth: 2,\n    labelHighlightBold: false,\n    font: {\n      color: \"#393e46\",\n      strokeWidth: 2,\n      size: 15\n    }\n  },\n  physics: {\n    hierarchicalRepulsion: {\n      damping: 0.1,\n      springLength: 200\n    },\n    solver: \"hierarchicalRepulsion\",\n    minVelocity: 0.15\n  }\n};\n","// react\nimport React from \"react\";\n\nimport { Typography, Grid } from \"@material-ui/core\";\nimport GavelIcon from \"@material-ui/icons/Gavel\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\n\n// local\nimport IconText from \"components/shared/IconText\";\n\nconst Popup = ({ node }) => {\n  return (\n    <div>\n      <Grid container alignItems=\"center\">\n        <Grid item sx={6}>\n          <Typography variant=\"h6\">\n            <b>{node.value.id}</b>\n          </Typography>\n        </Grid>\n        <Grid item sx={6}>\n          <Typography ml={2} variant=\"body1\">\n            v{node.value.version ?? \"NaN\"}\n          </Typography>\n        </Grid>\n      </Grid>\n      <Typography gutterBottom variant=\"body2\">\n        {node.value?.metadata?.summary ?? \"NaN\"}\n      </Typography>\n      <Grid container spacing={2}>\n        <Grid item>\n          <IconText\n            text={node.value?.metadata?.license ?? \"NaN\"}\n            icon={<GavelIcon />}\n          />\n        </Grid>\n        <Grid item>\n          <IconText\n            ml={2}\n            text={\n              node.value?.latestVersion\n                ? \"Latest version is installed\"\n                : \"Installed version is NOT the latest.\"\n            }\n            icon={<BookmarkIcon />}\n          />\n        </Grid>\n      </Grid>\n      <Typography variant=\"body2\" mt={2}>\n        {node.value?.justifications?.header}\n      </Typography>\n    </div>\n  );\n};\n\nexport default Popup;\n","// react\nimport React, { useEffect, useRef, useContext } from \"react\";\nimport ReactDOM from \"react-dom\";\n\n// utils and configs\nimport { options } from \"config/networkOptions\";\nimport { StateContext } from \"App\";\n\n// vis-network\nimport { Network, DataSet } from \"vis-network/standalone\";\n\n// material ui\nimport { makeStyles } from \"@material-ui/styles\";\n\n// local\nimport Popup from \"./Popup\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\"\n  },\n  canvas: {\n    flex: \"1 1 auto\",\n    height: \"50vh\"\n  }\n}));\n\nconst NetworkGraph = ({ root, selected, ...props }) => {\n  const classes = useStyles();\n  const visJsRef = useRef(null);\n  const state = useContext(StateContext);\n\n  // create the graph\n  useEffect(() => {\n    if (!selected || !root || !state.mergedGraph) {\n      return;\n    }\n\n    let nodes = state.mergedGraph.findAllNodesOnAllPaths(selected, \"*App\");\n\n    nodes.set(\"*App\", state.mergedGraph.nodes.get(\"*App\"));\n\n    // convert to vis graph format\n    const convertedNodes = new DataSet();\n    nodes.forEach(value => {\n      // popup element\n      var popup = document.createElement(\"div\");\n      ReactDOM.render(<Popup node={value} />, popup);\n\n      // default colors\n      let color = value.value.color ?? options.nodes.color;\n      let font = undefined;\n\n      // if node is root\n      if (value.key === root) {\n        color = \"#4fc1ea\";\n        font = { color: \"#4fc1ea\", strokeWidth: 3, size: 20 };\n      }\n      // if selected node\n      else if (value.key === selected.key) {\n        color = \"#f39200\";\n      }\n\n      convertedNodes.add({\n        ...value.value,\n        color: color,\n        title:\n          value.key === selected.key || value.key === root ? undefined : popup,\n        font: font\n      });\n    });\n    const visData = {\n      nodes: convertedNodes,\n      edges: new DataSet(state.mergedGraph.visEdges)\n    };\n\n    const network =\n      visJsRef.current && new Network(visJsRef.current, visData, options);\n\n    // change curser when hovering and grabbing\n    // Get the canvas HTML element\n    var networkCanvas = document\n      .getElementById(\"mynetwork\")\n      .getElementsByTagName(\"canvas\")[0];\n\n    // changes the curser graphic depedning on where and what the mouse is doing\n    function changeCursor(newCursorStyle) {\n      networkCanvas.style.cursor = newCursorStyle;\n    }\n    network.on(\"hoverNode\", function() {\n      changeCursor(\"grab\");\n    });\n    network.on(\"blurNode\", function() {\n      changeCursor(\"default\");\n    });\n    network.on(\"dragStart\", function() {\n      changeCursor(\"grabbing\");\n    });\n    network.on(\"dragging\", function() {\n      changeCursor(\"grabbing\");\n    });\n    network.on(\"dragEnd\", function() {\n      changeCursor(\"grab\");\n    });\n\n    // fix (stick in place) node when done dragging\n    network.on(\"dragEnd\", function(params) {\n      if (params.nodes.length !== 0 && !network.isCluster(params.nodes[0])) {\n        network.editNode(params.nodes[0]);\n      }\n    });\n\n    // hover over node\n    network.on(\"dragEnd\", function(params) {\n      if (params.nodes.length !== 0 && !network.isCluster(params.nodes[0])) {\n        network.editNode(params.nodes[0]);\n      }\n    });\n  }, [root, selected, state.mergedGraph]);\n\n  return (\n    <div className={`${classes.root} ${props.className}`}>\n      <div ref={visJsRef} id=\"mynetwork\" className={classes.canvas} />\n    </div>\n  );\n};\n\nexport default NetworkGraph;\n","// React\nimport React, { useContext } from \"react\";\n\n// material-ui\nimport { Typography, Grid, Box, Paper, Link, Button } from \"@material-ui/core\";\nimport GavelIcon from \"@material-ui/icons/Gavel\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\n\n// local\nimport IconText from \"components/shared/IconText\";\nimport NetworkGraphView from \"./NetworkGraphView\";\n\n// redux\nimport { StateContext } from \"App\";\n\nconst SelectedPackage = ({ selectedKey, setSelected }) => {\n  const state = useContext(StateContext);\n\n  const selected = state.mergedGraph.nodes.get(selectedKey);\n\n  const dependents = { removed: [], added: [], version: [], unchanged: [] };\n  [...selected?.parents]\n    .filter(p => p !== \"*App\")\n    .forEach(node => {\n      dependents[state.mergedGraph.nodes.get(node).value.change].push(node);\n    });\n\n  return (\n    <Box>\n      <Paper sx={{ padding: 2 }}>\n        <Grid container alignItems=\"center\" mb={1}>\n          <Grid item sx={6}>\n            <Typography variant=\"h3\">\n              <b>{selected?.value?.metadata?.name}</b>\n            </Typography>\n          </Grid>\n          <Grid item sx={6}>\n            <Typography ml={2} variant=\"h6\">\n              v{selected?.value?.metadata?.version ?? \"NaN\"}\n            </Typography>\n          </Grid>\n        </Grid>\n\n        <Typography gutterBottom variant=\"body1\">\n          {selected?.value?.metadata?.summary ?? \"NaN\"}\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item>\n            <IconText\n              text={selected?.value?.metadata?.license ?? \"NaN\"}\n              icon={<GavelIcon />}\n            />\n          </Grid>\n          <Grid item>\n            <IconText\n              ml={2}\n              text={\n                selected?.value?.latestVersion\n                  ? \"Latest version is installed\"\n                  : \"Installed version is NOT the latest.\"\n              }\n              icon={<BookmarkIcon />}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <Paper sx={{ padding: 2, marginTop: 2 }}>\n        <Typography variant=\"h5\">Thoth Justifications</Typography>\n        <Typography variant=\"body1\" mt={2}>\n          {selected?.value?.justifications?.header}\n        </Typography>\n        {selected?.value?.justifications?.reasons?.length ? (\n          <ul>\n            {selected?.value?.justifications?.reasons.map(reason => {\n              return (\n                <li key={reason.package}>\n                  <Typography variant=\"body1\" mt={2}>\n                    <Link\n                      underline=\"hover\"\n                      onClick={() => setSelected(reason.package)}\n                    >\n                      {reason.package}\n                    </Link>\n                    {reason.reason}\n                  </Typography>\n                </li>\n              );\n            })}\n          </ul>\n        ) : null}\n\n        {selected?.value?.justifications?.thoth?.length > 0 ? (\n          <Typography variant=\"h6\" mt={2}>\n            Security Reasonings\n          </Typography>\n        ) : null}\n        {selected?.value?.justifications?.thoth?.map(reason => {\n          return (\n            <Grid container alignItems=\"center\" ml={3}>\n              <Grid item xs={10}>\n                <Typography variant=\"body1\" mt={1}>\n                  {reason.message}\n                </Typography>\n                <Typography variant=\"body2\" ml={3} mt={0.5}>\n                  {reason.advisory}\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Button href={reason.link}>READ MORE</Button>\n              </Grid>\n            </Grid>\n          );\n        })}\n      </Paper>\n\n      <Paper sx={{ padding: 2, marginTop: 2 }}>\n        <Typography variant=\"h5\" mb={2}>\n          Package Origins\n        </Typography>\n        <Typography variant=\"body1\" mb={2}>\n          {[...selected?.parents].filter(p => p !== \"*App\")?.length === 0\n            ? selected?.value?.label +\n              \" is not a dependent of any package in this Python environment\"\n            : \"There are \" +\n              [...selected?.parents].filter(p => p !== \"*App\")?.length +\n              \" package(s) that have \" +\n              selected?.value?.label +\n              \" as a direct dependency. Of those package(s)\"}\n\n          {Object.keys(dependents).map((change, i, a) => {\n            if (dependents[change].length === 0) {\n              return null;\n            }\n\n            return (\n              <React.Fragment>\n                {\", \" +\n                  dependents[change].length +\n                  (change === \"version\"\n                    ? \" had a version change \"\n                    : (dependents[change].length === 1 ? \" was \" : \" were \") +\n                      change) +\n                  \" (\"}\n                {dependents[change].map((p, i, a) => {\n                  let text = p;\n                  if (i !== a.length - 1) {\n                    text += \", \";\n                  }\n                  return (\n                    <Link underline=\"hover\" onClick={() => setSelected(p)}>\n                      {text}\n                    </Link>\n                  );\n                })}\n                {\")\"}\n              </React.Fragment>\n            );\n          })}\n          {\".\"}\n        </Typography>\n\n        <NetworkGraphView root={\"*App\"} selected={selected} />\n      </Paper>\n    </Box>\n  );\n};\n\nexport default SelectedPackage;\n","// React\nimport React, { useContext, useState } from \"react\";\n\n// local components\nimport AdviseTableView from \"./AdviseTableView\";\nimport SearchBar from \"components/shared/SearchBar\";\nimport SelectedPackage from \"./SelectedPackage\";\n\n// Shared\nimport LoadingErrorTemplate from \"components/shared/LoadingErrorTemplate\";\n\n// material-ui\nimport { Paper, Grid, Typography } from \"@material-ui/core\";\nimport SearchRoundedIcon from \"@mui/icons-material/SearchRounded\";\n\n// redux\nimport { StateContext } from \"App\";\n\nconst AdvisePage = () => {\n  const state = useContext(StateContext);\n\n  const [search, setSearch] = useState(\"\");\n  const [selected, setSelected] = useState();\n\n  const handleSearch = event => {\n    setSearch(event.target.value);\n  };\n\n  return (\n    <LoadingErrorTemplate isLoading={state.mergedGraph === undefined}>\n      <Grid\n        container\n        spacing={2}\n        justifyContent=\"center\"\n        alignItems=\"flex-start\"\n        mt={2}\n      >\n        <Grid item s={12} md={6}>\n          <Paper sx={{ padding: 2 }}>\n            <SearchBar\n              onChange={handleSearch}\n              lefticon={<SearchRoundedIcon />}\n            />\n            <AdviseTableView\n              search={search}\n              filteredGraph={state.mergedGraph}\n              selected={selected}\n              setSelected={setSelected}\n            />\n          </Paper>\n        </Grid>\n        <Grid item s={12} md={6}>\n          {!selected ? (\n            <Typography variant=\"body1\" align=\"center\">\n              No package selected\n            </Typography>\n          ) : (\n            <SelectedPackage selectedKey={selected} setSelected={setSelected} />\n          )}\n        </Grid>\n      </Grid>\n    </LoadingErrorTemplate>\n  );\n};\n\nexport default AdvisePage;\n","/**\n * Graph node/vertex that hold adjacencies nodes\n * For performance, uses a HashSet instead of array for adjacents.\n */\nexport class Node {\n  constructor(key, value) {\n    this.adjacents = new Set(); // adjacency list\n    this.key = key; // key\n    this.value = value;\n  }\n\n  /**\n   * Add node to adjacency list\n   * Runtime: O(1)\n   * @param {Node} node\n   */\n  addAdjacent(node) {\n    this.adjacents.add(node);\n  }\n\n  /**\n   * Check if a Node is adjacent to other\n   * Runtime: O(1)\n   * @param {Node} node\n   */\n  isAdjacent(node) {\n    return this.adjacents.has(node);\n  }\n\n  /**\n   * Get all adjacent nodes\n   */\n  getAdjacents() {\n    return Array.from(this.adjacents);\n  }\n}\n","import { Node } from \"utils/Node\";\n\n/**\n * Graph data structure implemented with an adjacent list\n */\nexport class Graph {\n  constructor() {\n    this.nodes = new Map();\n  }\n\n  /**\n   * Add a node to the graph.\n   */\n  addVertex(key, value) {\n    if (this.nodes.has(key)) {\n      return this.nodes.get(key);\n    }\n\n    const vertex = new Node(key, value);\n    this.nodes.set(key, vertex);\n    return vertex;\n  }\n\n  /**\n   * Create a connection between the source node and the destination node.\n   * If the nodes don't exist, then it will make them on the fly.\n   */\n  addEdge(source, destination) {\n    const sourceNode = this.nodes.get(source);\n    const destinationNode = this.nodes.get(destination);\n\n    sourceNode.addAdjacent(destinationNode);\n\n    return [sourceNode, destinationNode];\n  }\n\n  /**\n   * True if two nodes are adjacent.\n   */\n  areAdjacents(source, destination) {\n    const sourceNode = this.nodes.get(source);\n    const destinationNode = this.nodes.get(destination);\n\n    if (sourceNode && destinationNode) {\n      return sourceNode.isAdjacent(destinationNode);\n    }\n\n    return false;\n  }\n\n  /**\n   * Generic graph search where we can pass a bfs or dfs\n   */\n  *graphSearch(first, type = \"bfs\") {\n    const visited = new Map();\n    const visitList = [];\n\n    visitList.push(first);\n\n    while (visitList.length !== 0) {\n      const node = type === \"dfs\" ? visitList.pop() : visitList.shift();\n      if (node && !visited.has(node)) {\n        yield node;\n        visited.set(node);\n        node.getAdjacents().forEach(adj => visitList.push(adj));\n      }\n    }\n  }\n\n  /**\n   * Find a path between source and destination\n   * It might not be the optimal path\n   */\n  findPath(source, destination, path = new Map()) {\n    const sourceNode = this.nodes.get(source);\n    const destinationNode = this.nodes.get(destination);\n    const newPath = new Map(path);\n\n    if (!destinationNode || !sourceNode) return [];\n\n    newPath.set(sourceNode);\n\n    if (source === destination) {\n      return Array.from(newPath.keys());\n    }\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const node of sourceNode.getAdjacents()) {\n      if (!newPath.has(node)) {\n        const nextPath = this.findPath(node.value, destination, newPath);\n        if (nextPath.length) {\n          return nextPath;\n        }\n      }\n    }\n\n    return [];\n  }\n\n  findAllNodesOnAllPaths(source, destination, visited = new Map()) {\n    const visitList = [];\n\n    visitList.push(source);\n\n    while (visitList.length !== 0) {\n      const node = visitList.pop();\n      if (node.key === destination) {\n        continue;\n      }\n      if (node && !visited.has(node.key)) {\n        visited.set(node.key, node);\n        node.parents.forEach(parent => visitList.push(this.nodes.get(parent)));\n      }\n    }\n\n    return visited;\n  }\n\n  /**\n   * Find all paths from source to destination\n   */\n  findAllPaths(source, destination, path = new Map()) {\n    const sourceNode = this.nodes.get(source);\n    const destinationNode = this.nodes.get(destination);\n    const newPath = new Map(path);\n\n    if (!destinationNode || !sourceNode) return [];\n\n    newPath.set(sourceNode);\n\n    if (source === destination) {\n      return [Array.from(newPath.keys())];\n    }\n\n    const paths = [];\n    sourceNode.getAdjacents().forEach(node => {\n      if (!newPath.has(node)) {\n        const nextPaths = this.findAllPaths(\n          node.value.id,\n          destination,\n          newPath\n        );\n        nextPaths.forEach(nextPath => {\n          paths.push(nextPath);\n        });\n      }\n    });\n    return paths;\n  }\n}\n","import { useContext, useEffect } from \"react\";\n\n// api\nimport { thothSearchForPackage, thothGetDependencies } from \"services/thothApi\";\n\n// utils\nimport { Graph } from \"utils/Graph\";\n\n// redux\nimport { DispatchContext } from \"App\";\n\nexport function useLockFileToGraph(pipfile, pipfileLock, stateName) {\n  const dispatch = useContext(DispatchContext);\n\n  useEffect(() => {\n    if (!pipfile || !pipfileLock || !stateName) {\n      return;\n    }\n\n    const graph = new Graph();\n\n    (async () => {\n      await Promise.all(\n        Object.entries(pipfileLock).map(async ([key, value]) => {\n          // get package metadata\n          return thothSearchForPackage(\n            key,\n            value.version.replace(\"==\", \"\")\n          ).then(metadata => {\n            const v = {\n              id: metadata.name.toLowerCase().replace(\".\", \"-\"),\n              label: metadata.name,\n              metadata: metadata\n            };\n\n            // add package to graph\n            const node = graph.addVertex(v.id, v);\n            node.parents = new Set();\n          });\n        })\n      );\n    })()\n      .then(() => {\n        // create edges between nodes\n        const notRoot = [];\n\n        (async () => {\n          await Promise.all(\n            Array.from(graph.nodes.entries()).map(async ([key, value]) => {\n              // get dependencies through thoth\n              return (\n                thothGetDependencies(\n                  value.value?.metadata?.name,\n                  value.value?.metadata?.version\n                )\n                  .then(deps => {\n                    deps.data.dependencies.forEach(dep => {\n                      const adjacentNode = graph.nodes.get(dep.name);\n\n                      // if package exists in lockfile\n                      if (adjacentNode) {\n                        // add edge connecting parent and dependency\n                        graph.addEdge(key, adjacentNode.value.id);\n                        // set parent\n                        adjacentNode.parents.add(key);\n                        notRoot.push(adjacentNode.value.id);\n                      }\n                    });\n                  })\n                  // if no record in thoth, then use metadata\n                  .catch(() => {\n                    if (value?.value?.metadata?.requires_dist) {\n                      // for each dependency, parse to get name\n                      value.value.metadata.requires_dist.forEach(async adj => {\n                        const adjacentNode = graph.nodes.get(\n                          adj\n                            .split(\" \", 1)[0]\n                            .toLowerCase()\n                            .replace(\".\", \"-\")\n                        );\n\n                        // if package exists in lockfile\n                        if (adjacentNode) {\n                          // add edge connecting parent and dependency\n                          graph.addEdge(key, adjacentNode.value.id);\n                          // set parent\n                          adjacentNode.parents.add(key);\n                          notRoot.push(adjacentNode.value.id);\n                        }\n                      });\n                    }\n                  })\n              );\n            })\n          );\n        })().then(() => {\n          // add app node to graph\n          const app = graph.addVertex(\"*App\", {\n            id: \"*App\",\n            label: \"App\",\n            depth: -1\n          });\n\n          notRoot.push(\"*App\");\n\n          const visited = new Map();\n          const visitList = [];\n\n          // get roots and connect to app\n          graph.nodes.forEach((value, key, map) => {\n            if (!notRoot.includes(key) || Object.keys(pipfile).includes(key)) {\n              const node = map.get(key);\n              node.value.depth = 0;\n              node.parents.add(\"*App\");\n              visitList.push(node);\n              graph.addEdge(app.key, node.key);\n            }\n          });\n\n          // set depth and parent packages using dfs\n          while (visitList.length !== 0) {\n            const node = visitList.pop();\n            if (node && !visited.has(node)) {\n              visited.set(node);\n\n              const adjs = node.getAdjacents();\n\n              for (var i = 0; i < adjs.length; i++) {\n                // update depth\n                adjs[i].value.depth = Math.min(\n                  node.value.depth + 1,\n                  adjs[i].value.depth ?? node.value.depth + 2\n                );\n                visitList.push(adjs[i]);\n              }\n            }\n          }\n\n          dispatch({\n            type: \"graph\",\n            name: stateName,\n            payload: graph\n          });\n        });\n      })\n      .catch(e => {\n        dispatch({\n          type: \"error\",\n          payload:\n            (e?.response?.statusText ?? \"Unknown Error\") +\n            \": an error occured while fetching package data.\"\n        });\n      });\n  }, [pipfile, pipfileLock, dispatch, stateName]);\n}\n","const whyRemoved = (start, packages) => {\n  const visited = new Map();\n  const visitList = [];\n\n  visitList.push(start);\n\n  const reasonNodes = [];\n\n  while (visitList.length !== 0) {\n    const node = visitList.pop();\n    if (node && !visited.has(node)) {\n      visited.set(node);\n\n      if (node.key === \"*App\") {\n        continue;\n      } else if (node.value.change === \"version\") {\n        reasonNodes.push(node);\n      } else {\n        node.parents.forEach(adj => {\n          if (adj === \"*App\" && node.key !== start.key) {\n            reasonNodes.push(node);\n          }\n          visitList.push(packages.get(adj));\n        });\n      }\n    }\n  }\n\n  const reasons = reasonNodes.map(node => {\n    const reason =\n      node.value.change === \"version\"\n        ? \" had its version changed to \" +\n          node.value.version +\n          \" from \" +\n          node.value.oldVersion +\n          \". Version \" +\n          node.value.oldVersion +\n          \" of \" +\n          node.key +\n          \" included package \" +\n          start.value.label +\n          \" as a dependency, where version \" +\n          node.value.version +\n          \" does not. \"\n        : \" did not have any dependents and was removed by the Thoth resolver.\";\n    return {\n      package: node.key,\n      reason: reason\n    };\n  });\n\n  return reasons;\n};\n\nexport const discoverPackageChanges = (nodes, justifications) => {\n  if (!nodes || !justifications) {\n    return;\n  }\n\n  const justifiedPackages = new Map();\n  justifications.forEach(justification => {\n    if (justification.package_name) {\n      if (justifiedPackages.has(justification.package_name)) {\n        justifiedPackages.set(justification.package_name, [\n          ...justifiedPackages.get(justification.package_name),\n          justification\n        ]);\n      } else {\n        justifiedPackages.set(justification.package_name, [justification]);\n      }\n    }\n  });\n\n  nodes.forEach(node => {\n    let justification = {\n      package: node.key\n    };\n\n    if (node.value.change === \"removed\") {\n      // set header\n      justification.header = `${node.value.label} was ${\n        node.value.depth === 0 ? \"directly\" : \"indirectly\"\n      } removed by Thoth resolver.`;\n\n      // set reasons for removal\n      justification.reasons = whyRemoved(node, nodes);\n\n      // if no reasons for removal\n      if (justification.reasons.length === 0) {\n        justification.header = `${node.value.label} was removed for an unknown reason. The package does not have dependents in the Pipfile.lock.`;\n      }\n    }\n    // if added\n    else if (node.value.change === \"added\") {\n      justification.header = `${node.value.label} was added to the Pipfile.lock by Thoth resolver.`;\n    }\n\n    // if added\n    else if (node.value.change === \"version\") {\n      justification.header = `${node.key} had its version changed from ${node.value.oldVersion} to ${node.value.version}.`;\n    }\n\n    // if unchanged\n    else {\n      justification.header =\n        \"Thoth resolver did not remove or change package \" +\n        node.value.label +\n        \".\";\n    }\n\n    // check if there is a justification for change\n    if (justifiedPackages.has(node.key)) {\n      const reasons = justifiedPackages.get(node.key);\n      justification = {\n        ...justification,\n        thoth: reasons\n      };\n    }\n\n    node.value.justifications = justification;\n  }, []);\n};\n","// api\nimport { getLicenses } from \"services/thothApi\";\n\n// redux\nimport { DispatchContext, StateContext } from \"App\";\n\nimport { useContext, useEffect, useState } from \"react\";\n\n// React hook for computing metrics and applying to state\nexport function useComputeMetrics(graph, label) {\n  const dispatch = useContext(DispatchContext);\n  const state = useContext(StateContext);\n\n  useEffect(() => {\n    if (!state?.advise?.metadata || !state?.mergedGraph) {\n      return;\n    }\n\n    const advise = {\n      added: 0,\n      removed: 0,\n      version: 0,\n      unchanged: 0,\n      justification: {},\n      build: null\n    };\n\n    // package changes\n    state.mergedGraph.nodes.forEach(node => {\n      switch (node.value.change) {\n        case \"added\":\n          advise.added++;\n          break;\n        case \"removed\":\n          advise.removed++;\n          break;\n        case \"version\":\n          advise.version++;\n          break;\n        default:\n          advise.unchanged++;\n      }\n    });\n\n    // build environment\n    advise.build = `We have analysed an application stack running on ${state.advise.metadata.os_release.name} ${state.advise.metadata.os_release.version}, running Python (${state.advise.metadata.python.implementation_name}) ${state.advise.metadata.python.major}.${state.advise.metadata.python.minor}.${state.advise.metadata.python.micro}. It was Adviser Job ID ${state.advise.metadata.document_id}, by ${state.advise.metadata.analyzer} v${state.advise.metadata.analyzer_version}. `;\n\n    // justification counts\n    state.advise?.report?.products?.[0]?.justification.forEach(\n      justification => {\n        if (justification.type !== \"INFO\") {\n          if (advise?.justification[justification.type] !== undefined) {\n            advise.justification[justification.type]++;\n          } else {\n            advise.justification[justification.type] = 0;\n          }\n        }\n      }\n    );\n\n    dispatch({\n      type: \"metric\",\n      metric: \"advise\",\n      payload: advise\n    });\n  }, [state.mergedGraph, state.advise, dispatch]);\n\n  // get license info\n  const [licenseData, setLicenseData] = useState();\n  useEffect(() => {\n    getLicenses()\n      .then(licenseData => {\n        setLicenseData(licenseData);\n      })\n      .catch(() => setLicenseData({}));\n  }, []);\n\n  useEffect(() => {\n    if (!graph || !licenseData) {\n      return;\n    }\n\n    let dependencies = {\n      all: {},\n      roots: {}\n    };\n\n    let licenses = { total: undefined, all: {} };\n\n    const roots = [];\n    graph.nodes.forEach(value => {\n      if (value.value.depth === 0) {\n        roots.push(value.key);\n      }\n    });\n\n    const visited = new Set();\n\n    // for each starting node\n    roots.forEach(root => {\n      const bfs = graph.graphSearch(graph.nodes.get(root));\n      const visitedOrder = Array.from(bfs);\n\n      // depth to type of dependency\n      visitedOrder.forEach(node => {\n        if (node.key === \"*App\") {\n          return;\n        }\n\n        if (visited.has(node.value.id)) {\n          return;\n        } else {\n          visited.add(node.value.id);\n        }\n\n        const depth =\n          node.value.depth === 0\n            ? \"roots\"\n            : node.value.depth === 1\n            ? \"direct\"\n            : \"indirect\";\n\n        // dependency metric\n        dependencies = {\n          all: {\n            ...dependencies.all,\n            [depth]: (dependencies.all[depth] ?? 0) + 1\n          },\n          roots: {\n            ...dependencies.roots,\n            [root]: {\n              ...(dependencies.roots[root] ?? null),\n              [depth]: (dependencies.roots?.[root]?.[depth] ?? 0) + 1\n            }\n          }\n        };\n\n        // licence metric\n        const packageLicenses = [];\n\n        // get general classification\n        (\n          node?.value?.metadata?.classifier ??\n          node?.value?.metadata?.classifiers\n        )?.forEach(classifier => {\n          const parsed = classifier.split(\" :: \");\n\n          if (parsed[0] === \"License\") {\n            if (parsed[1] === \"OSI Approved\") {\n              packageLicenses.push({\n                generalLicense: parsed?.[2] ?? node.value.metadata.license,\n                specificLicense: node.value.metadata.license,\n                isOsiApproved: true\n              });\n            } else {\n              packageLicenses.push({\n                generalLicense: parsed?.[1] ?? node.value.metadata.license,\n                specificLicense: node.value.metadata.license,\n                isOsiApproved: false\n              });\n            }\n          }\n        });\n\n        if (packageLicenses.length === 0) {\n          // find license in dataset\n          let found = undefined;\n          if (licenseData.licenses) {\n            found = licenseData.licenses.find(l => {\n              const lower = node.value.metadata.license.toLowerCase();\n              return (\n                l.name.toLowerCase() === lower ||\n                l.licenseId.toLowerCase() === lower\n              );\n            });\n          }\n          if (found) {\n            packageLicenses.push({\n              generalLicense: found.name,\n              specificLicense: found.licenseId,\n              isOsiApproved: found.isOsiApproved\n            });\n          } else {\n            packageLicenses.push({\n              generalLicense: node.value.metadata.license,\n              specificLicense: node.value.metadata.license,\n              isOsiApproved: null\n            });\n          }\n        }\n\n        // get specific classification\n        packageLicenses.forEach(license => {\n          licenses = {\n            total: (licenses.total ?? 0) + 1,\n            all: {\n              ...licenses.all,\n              [license.generalLicense]: {\n                ...(licenses.all[license.generalLicense] ?? null),\n                [node.value.label]: {\n                  depth: node.value.depth,\n                  specific: license.specificLicense\n                },\n                _meta: {\n                  isOsiApproved: license.isOsiApproved\n                }\n              }\n            }\n          };\n        });\n      });\n    });\n\n    // apply metrics to global state\n    dispatch({\n      type: \"metric\",\n      metric: \"dependencies\",\n      label: label,\n      payload: dependencies\n    });\n    dispatch({\n      type: \"metric\",\n      metric: \"licenses\",\n      label: label,\n      payload: licenses\n    });\n  }, [graph, dispatch, licenseData, label]);\n}\n","import { useEffect, useRef } from \"react\";\n\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n};\n","// React\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// local\nimport MetricLayout from \"components/dashboard/SummaryPage\";\nimport AdviseHeader from \"components/dashboard/AdviseHeader\";\n\nimport TabPanel from \"components/shared/TabPanel\";\nimport AdvisePage from \"components/dashboard/AdvisePage\";\n\n// utils\nimport {\n  useComputeMetrics,\n  useLockFileToGraph,\n  useMergeGraphs,\n  useInterval\n} from \"./hooks\";\n\n// api\nimport { thothAdviseResult, thothAdviseStatus } from \"services/thothApi\";\n\n// redux\nimport { StateContext, DispatchContext } from \"App\";\n\n// material-ui\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Tab, Tabs, Typography } from \"@material-ui/core\";\n\n// component styling\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    maxWidth: \"95%\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    paddingRight: theme.spacing(3),\n    paddingLeft: theme.spacing(3),\n    marginTop: theme.spacing(4)\n  }\n}));\n\n// The page that displays all analyis data\nexport const Dashboard = ({ location }) => {\n  const classes = useStyles();\n  const params = useParams();\n  const state = useContext(StateContext);\n  const dispatch = useContext(DispatchContext);\n\n  // for tab control\n  const [value, setValue] = useState(0);\n\n  // delay for each status api call\n  const [pollingTime, setPollingTime] = useState(null);\n\n  const getStatus = () => {\n    thothAdviseStatus(params.analysis_id)\n      .then(response => {\n        // set next polling delay\n        const status = response.data.status;\n\n        dispatch({\n          type: \"advise\",\n          param: \"status\",\n          payload: status\n        });\n\n        if (response.data.error && state.error !== response.data.error) {\n          dispatch({\n            type: \"error\",\n            payload: response.data.error\n          });\n        }\n\n        // check if advise is done\n        // if done then turn off polling whcih triggers another call for results\n        if (status.finished_at !== null) {\n          setPollingTime(null);\n        } else {\n          setPollingTime(\n            pollingTime !== null ? Math.min(pollingTime * 2, 8000) : null\n          );\n        }\n      })\n      .catch(e => {\n        dispatch({\n          type: \"error\",\n          payload:\n            (e?.response?.statusText ?? \"Unknown Error\") +\n            \": an error occured while fetching Thoth advise status.\"\n        });\n      });\n  };\n\n  // first reset state if using new anyalysis id\n  useEffect(() => {\n    if (!state?.analysis_id || params.analysis_id !== state?.analysis_id) {\n      dispatch({\n        type: \"reset\"\n      });\n      dispatch({\n        type: \"advise\",\n        param: \"analysis_id\",\n        payload: params.analysis_id\n      });\n    }\n  }, [params.analysis_id, state?.analysis_id, dispatch]);\n\n  // fetch results of advise\n  useEffect(() => {\n    // only run if polling is turned off (meaning the result is ready)\n    if (pollingTime !== null) {\n      return;\n    }\n\n    // get results of advise request\n    thothAdviseResult(params.analysis_id)\n      .then(response => {\n        const data = response?.data;\n\n        // if cant run advise error\n        if (response.status === 400 || response.status === 404) {\n          // set error and stop polling\n          setPollingTime(null);\n          dispatch({\n            type: \"advise\",\n            param: \"error\",\n            payload: data.error\n          });\n        }\n\n        // if not done then start polling\n        else if (response.status === 202) {\n          if (data.status.state === \"error\") {\n            dispatch({\n              type: \"advise\",\n              param: \"status\",\n              payload: data.status\n            });\n          } else {\n            setPollingTime(500);\n          }\n        }\n\n        // if done then set results and stop polling\n        // note this could also have an error but should of been stopped above\n        else if (response.status === 200) {\n          // stop polling when done\n          setPollingTime(null);\n\n          if (data.result?.error) {\n            dispatch({\n              type: \"advise\",\n              param: \"error\",\n              payload: data.result.error_msg\n            });\n          }\n          dispatch({\n            type: \"advise\",\n            param: \"initProject\",\n            payload: data.result.parameters.project\n          });\n          dispatch({\n            type: \"advise\",\n            param: \"report\",\n            payload: data.result.report\n          });\n          dispatch({\n            type: \"advise\",\n            param: \"metadata\",\n            payload: data.metadata\n          });\n        }\n        // if an unknown response occured\n        else {\n          dispatch({\n            type: \"advise\",\n            param: \"error\",\n            payload: \"Unknown Error: Aborting\"\n          });\n        }\n      })\n      .catch(e => {\n        dispatch({\n          type: \"error\",\n          payload:\n            (e?.response?.statusText ?? \"Unknown Error\") +\n            \": an error occured while fetching Thoth advise results.\"\n        });\n      });\n  }, [params.analysis_id, dispatch, pollingTime]);\n\n  useInterval(() => {\n    getStatus();\n  }, pollingTime);\n\n  // create graphs\n  useLockFileToGraph(\n    state?.advise?.report?.products?.[0]?.project?.requirements?.packages,\n    state?.advise?.report?.products?.[0]?.project?.requirements_locked?.default,\n    \"adviseGraph\"\n  );\n  useLockFileToGraph(\n    state?.advise?.initProject?.requirements?.packages,\n    state?.advise?.initProject?.requirements_locked?.default,\n    \"initGraph\"\n  );\n  useComputeMetrics(state.adviseGraph, \"new\");\n  useComputeMetrics(state.initGraph, \"old\");\n  useMergeGraphs(\n    state.initGraph,\n    state.adviseGraph,\n    \"*App\",\n    state?.advise?.report?.products?.[0]?.justification\n  );\n\n  // handle tab change\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <div>\n      <div className={classes.root}>\n        <AdviseHeader adviseID={params.analysis_id} />\n        <Typography color=\"error\">{state?.error}</Typography>\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n        >\n          <Tab label=\"Summary\" />\n          <Tab label=\"Advise Results\" />\n        </Tabs>\n        <TabPanel value={value} index={0}>\n          <MetricLayout />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          <AdvisePage />\n        </TabPanel>\n      </div>\n      <div bgcolor=\"#444f60\" minHeight=\"300px\" mt={5}></div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n","// utils\nimport { Graph } from \"utils/Graph\";\nimport { discoverPackageChanges } from \"../utils\";\n\n// redux\nimport { DispatchContext } from \"App\";\n\nimport { useContext, useEffect } from \"react\";\n\nimport { useTheme } from \"@material-ui/core/styles\";\n\nexport function useMergeGraphs(oldGraph, newGraph, root, justifications) {\n  const dispatch = useContext(DispatchContext);\n\n  const theme = useTheme();\n\n  useEffect(() => {\n    if (!oldGraph || !newGraph || !root) {\n      return;\n    }\n\n    const visGraphEdges = [];\n    const mergedGraph = new Graph();\n\n    newGraph.nodes.forEach((value, key) => {\n      // get node\n      const combinedNode = newGraph.nodes.get(key);\n\n      // check if added, changed, or unchanged\n      // if added (old graph doesnt have the package)\n      if (!oldGraph.nodes.has(key)) {\n        combinedNode.value = {\n          ...combinedNode.value,\n          change: \"added\",\n          label:\n            value.value.label + \" \" + (value?.value?.metadata?.version ?? \"\"),\n          font: {\n            color: theme.palette.success.main\n          },\n          color: theme.palette.success.main,\n          version: value?.value?.metadata?.version ?? \"\",\n          dependencies: value.adjacents.size,\n          license: value?.value?.metadata?.license ?? \"\",\n          lockfile: [\"new\"]\n        };\n      }\n      // if the graph is not new then it is either equal or the version changed\n      else {\n        // set values that wont change\n        combinedNode.value = {\n          ...combinedNode.value,\n          label:\n            value.value.label + \" \" + (value?.value?.metadata?.version ?? \"\"),\n          dependencies: value.adjacents.size,\n          license: value?.value?.metadata?.license ?? \"\",\n          lockfile: [\"new\", \"old\"]\n        };\n        // if the nodes are equal (version are the same)\n        if (\n          value?.value?.metadata?.version ===\n          oldGraph.nodes.get(key)?.value?.metadata?.version\n        ) {\n          combinedNode.value = {\n            ...combinedNode.value,\n            version: value?.value?.metadata?.version ?? \"\",\n            change: \"unchanged\"\n          };\n        }\n        // if the version changed\n        else {\n          combinedNode.value = {\n            ...combinedNode.value,\n            change: \"version\",\n            version: value?.value?.metadata?.version ?? \"\",\n            oldVersion: oldGraph.nodes.get(key)?.value?.metadata?.version ?? \"\",\n            font: {\n              color: theme.palette.success.main\n            }\n          };\n\n          combinedNode.parents = [\n            ...new Set([\n              ...combinedNode.parents,\n              ...oldGraph.nodes.get(key)?.parents\n            ])\n          ];\n\n          // merge the dependencies becouse they could be different\n          oldGraph.nodes\n            .get(key)\n            .getAdjacents()\n            .forEach(item => combinedNode.adjacents.add(item));\n          newGraph.nodes\n            .get(key)\n            .getAdjacents()\n            .forEach(item => combinedNode.adjacents.add(item));\n        }\n      }\n\n      mergedGraph.nodes.set(key, combinedNode);\n    });\n\n    oldGraph.nodes.forEach((value, key) => {\n      // get node\n      const combinedNode = oldGraph.nodes.get(key);\n\n      // only checking if package was removed\n      if (!newGraph.nodes.has(key)) {\n        combinedNode.value = {\n          ...combinedNode.value,\n          change: \"removed\",\n          label:\n            value.value.label + \" \" + (value?.value?.metadata?.version ?? \"\"),\n          font: {\n            color: theme.palette.error.main\n          },\n          color: theme.palette.error.main,\n          version: value?.value?.metadata?.version ?? \"\",\n          dependencies: value.adjacents.size,\n          license: value?.value?.metadata?.license ?? \"\",\n          lockfile: [\"old\"]\n        };\n\n        mergedGraph.nodes.set(key, combinedNode);\n      }\n    });\n\n    // add edges from old graph\n    oldGraph.nodes.forEach((value, key) => {\n      // set package edges\n      value.adjacents.forEach(adj => {\n        visGraphEdges.push({\n          to: value.value.id,\n          from: adj.value.id,\n          lockfile: \"old\"\n        });\n      });\n    });\n\n    // add edges from new graph\n    newGraph.nodes.forEach((value, key) => {\n      // set package edges\n      value.adjacents.forEach(adj => {\n        visGraphEdges.push({\n          to: value.value.id,\n          from: adj.value.id,\n          lockfile: \"new\"\n        });\n      });\n    });\n\n    // set justifciations\n    discoverPackageChanges(mergedGraph.nodes, justifications);\n\n    // add edges to merged graph Object\n    mergedGraph[\"visEdges\"] = visGraphEdges;\n\n    // set state\n    dispatch({\n      type: \"graph\",\n      name: \"mergedGraph\",\n      payload: mergedGraph\n    });\n  }, [oldGraph, newGraph, theme, root, dispatch, justifications]);\n}\n","// React\nimport React, { useContext } from \"react\";\n\n// material-ui\nimport { Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport GavelIcon from \"@material-ui/icons/Gavel\";\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\";\n\n// local\nimport IconText from \"components/shared/IconText\";\n\n// utils\nimport timeSince from \"utils/timeSince\";\n// redux\nimport { StateContext } from \"App\";\n\n// component styling\nconst useStyles = makeStyles(theme => ({\n  titleRow: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  marginLeft: {\n    marginLeft: theme.spacing(2)\n  },\n  linksRow: {\n    display: \"flex\"\n  }\n}));\n\nconst PackageHeader = () => {\n  const classes = useStyles();\n  const { package_data } = useContext(StateContext);\n\n  return (\n    <div>\n      <div className={classes.titleRow} mb={1}>\n        <Typography variant=\"h4\">\n          <b>{package_data?.name}</b>\n        </Typography>\n        <Typography ml={2} variant=\"h6\">\n          v{package_data?.version ?? \"NaN\"}\n        </Typography>\n      </div>\n\n      <Typography gutterBottom variant=\"body1\">\n        {package_data?.summary ?? \"NaN\"}\n      </Typography>\n      <div className={classes.linksRow} mb={3}>\n        <IconText text={package_data?.license ?? \"NaN\"} icon={<GavelIcon />} />\n        <IconText\n          className={classes.marginLeft}\n          text={\n            \"Latest version published \" +\n            timeSince(\n              new Date(\n                package_data?.all_versions?.[package_data?.latest_version]?.date\n              )\n            ) +\n            \" ago.\"\n          }\n          icon={<BookmarkIcon />}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default PackageHeader;\n","// React\nimport React, { useContext, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// local\nimport PackageHeader from \"components/package/PackageHeader\";\n\n// api\nimport { thothSearchForPackage, searchForPackage } from \"services/thothApi\";\nimport compareVersions from \"tiny-version-compare\";\n\n// redux\nimport { DispatchContext } from \"App\";\n\n// material-ui\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\n\n// component styling\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    maxWidth: \"95%\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    paddingRight: theme.spacing(3),\n    paddingLeft: theme.spacing(3),\n    marginTop: theme.spacing(4)\n  }\n}));\n\n// The page that displays all analyis data\nexport const PackageOverview = ({ location }) => {\n  const classes = useStyles();\n  const params = useParams();\n  const dispatch = useContext(DispatchContext);\n\n  useEffect(() => {\n    searchForPackage(params.package_name, params.package_version).then(\n      response => {\n        var pypi_data = response.data;\n\n        // get versions\n        var package_data = {\n          latest_version: pypi_data.info.version,\n          all_versions: {}\n        };\n        Object.entries(pypi_data.releases).forEach(([k, v]) => {\n          if (\n            compareVersions(package_data.latest_version, k) === -1 &&\n            !v?.[0]?.yanked\n          ) {\n            package_data.latest_version = k;\n          }\n          package_data.all_versions[k] = {\n            date: v?.[0]?.upload_time,\n            yanked: v?.[0]?.yanked\n          };\n        });\n\n        // get thoth data of package\n        thothSearchForPackage(\n          params.package_name,\n          params.package_version ?? package_data.latest_version\n        )\n          .then(response => {\n            dispatch({\n              type: \"package\",\n              payload: {\n                ...package_data,\n                ...response.data.metadata,\n                isThoth: true\n              }\n            });\n          })\n          .catch(e => {\n            dispatch({\n              type: \"package\",\n              payload: {\n                ...package_data,\n                ...pypi_data.info,\n                isThoth: false\n              }\n            });\n          });\n      }\n    );\n  }, [dispatch, params.package_name, params.package_version]);\n\n  return (\n    <Grid container className={classes.root}>\n      <Grid item xs={12}>\n        <PackageHeader />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default PackageOverview;\n","import { Route, Switch } from \"react-router-dom\";\nimport { ROOT, ADVISE, PACKAGE } from \"./CONSTANTS\";\nimport NotFound from \"./NotFound\";\nimport Home from \"pages/Home/Home\";\nimport Dashboard from \"pages/Dashboard/Dashboard\";\nimport PackageOverview from \"pages/PackageOverview/PackageOverview\";\n\nexport const RouterConfig = () => {\n  return (\n    <Switch>\n      <Route exact path={ROOT} component={Home} />\n      <Route exact path={ADVISE + \"/:analysis_id\"} component={Dashboard} />\n      <Route\n        exact\n        path={PACKAGE + \"/:package_name/:package_version?\"}\n        component={PackageOverview}\n      />\n\n      <Route path=\"*\" status={404}>\n        <NotFound />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default RouterConfig;\n","export const REPONAME = \"/thoth-search\";\nexport const ROOT = \"/\";\nexport const ADVISE = \"/advise\";\nexport const PACKAGE = \"/package\";\n","export function reducer(state, action) {\n  switch (action.type) {\n    case \"graph\":\n      return { ...state, [action.name]: action.payload };\n    case \"metric\":\n      if (!action.label) {\n        return {\n          ...state,\n          metrics: {\n            ...state.metrics,\n            [action.metric]: action.payload\n          }\n        };\n      } else {\n        return {\n          ...state,\n          metrics: {\n            ...state.metrics,\n            [action.label]: {\n              ...state.metrics?.[action.label],\n              [action.metric]: action.payload\n            }\n          }\n        };\n      }\n\n    case \"error\": {\n      return {\n        ...state,\n        error: action.payload\n      };\n    }\n\n    case \"advise\": {\n      return {\n        ...state,\n        advise: {\n          ...state.advise,\n          [action.param]: action.payload\n        }\n      };\n    }\n    case \"packageWarning\": {\n      return {\n        ...state,\n        packageWarning: action.payload\n      };\n    }\n    case \"package\": {\n      return {\n        ...state,\n        package_data: action.payload\n      };\n    }\n    case \"reset\": {\n      return initState;\n    }\n    case \"localStorage\": {\n      return action.payload;\n    }\n    case \"focus\": {\n      return { ...state, focus: action.payload };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport const initState = {};\n","// local utils and configs\nimport { themeLight } from \"styles/theme\";\n\n// ROUTER\nimport { BrowserRouter } from \"react-router-dom\";\nimport { RouterConfig } from \"navigation/RouterConfig\";\nimport { REPONAME } from \"navigation/CONSTANTS\";\n\n// material ui\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\n// react\nimport React, { useReducer } from \"react\";\n\n// redux\nimport { reducer, initState } from \"redux/reducer\";\n\n// context for reducer\nexport const StateContext = React.createContext();\nexport const DispatchContext = React.createContext();\n\nfunction App() {\n  // for state control\n  const [state, dispatch] = useReducer(reducer, initState);\n  return (\n    <ThemeProvider theme={themeLight}>\n      <CssBaseline />\n      <BrowserRouter basename={REPONAME}>\n        <StateContext.Provider value={state}>\n          <DispatchContext.Provider value={dispatch}>\n            <RouterConfig />\n          </DispatchContext.Provider>\n        </StateContext.Provider>\n      </BrowserRouter>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}