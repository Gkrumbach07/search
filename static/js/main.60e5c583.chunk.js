(this["webpackJsonpthoth-search"]=this["webpackJsonpthoth-search"]||[]).push([[0],{87:function(e,t,n){"use strict";(function(e){var r=n(88),a=n(47),o=n(96),c=n(148),i=n(149),s=n(3);e.packagesReleases={},t.a=function(){return Object(s.jsxs)(c.a,{theme:r.a,children:[Object(s.jsx)(i.a,{}),Object(s.jsx)(a.a,{children:Object(s.jsx)(o.a,{})})]})}}).call(this,n(63))},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(69),a=Object(r.a)({palette:{background:{default:"#f9f9f9"}}})},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return ye}));var r=n(11),a="/thoth-search/",o=a+"dashboard",c=n(35),i=n(3),s=function(e){var t=e.text;return Object(i.jsxs)(c.a,{variant:"h2",children:["404: ",null!==t&&void 0!==t?t:"page"," not found!"]})},d=n(38),l=n(0),u=n(188),f=n(186),h=n(197),j=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"stretch",flexGrow:1}}})),b=function(e){var t=e.onChange,n=e.label,r=e.helperText,a=e.error,o=void 0!==a&&a,c=j();return Object(i.jsx)("div",{className:c.root,children:Object(i.jsx)(h.a,{type:"search",variant:"outlined",label:n,className:c.bar,onChange:function(e){return t(e.target.value)},helperText:r,error:o})})},p=n(66),g=n.n(p),x="https://api.moc.thoth-station.ninja/api/v1",v=function(e,t){return g.a.get("https://pypi.org/pypi/"+e+(t?"/"+t:"")+"/json")},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://pypi.org/simple";return g.a.get(x+"/python/package/dependencies",{params:{name:e,version:t,index:n},headers:{accept:"application/json"}})},m=Object(f.a)((function(e){return{root:{display:"flex",flexFlow:"column nowrap",alignItems:"center",marginTop:"20%"},search:{display:"flex",justifyContent:"center",alignItems:"stretch",minWidth:"50%"},description:{marginBottom:e.spacing(6)},title:{marginBottom:e.spacing(1)},button:{marginLeft:e.spacing(2)}}})),y=function(){var e=Object(r.f)(),t=m(),n=Object(l.useState)(""),a=Object(d.a)(n,2),s=a[0],f=a[1],h=Object(l.useState)(""),j=Object(d.a)(h,2),p=j[0],g=j[1];return Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsx)(c.a,{variant:"h4",className:t.title,children:Object(i.jsx)("b",{children:"Thoth Search"})}),Object(i.jsx)(c.a,{variant:"body1",className:t.description,children:"Use this search box to lookup specific Python packages."}),Object(i.jsxs)("div",{className:t.search,children:[Object(i.jsx)(b,{label:"Search for a Python package",onChange:function(e){return function(e){f(e),""!==p&&g("")}(e)},helperText:p,error:""!==p}),Object(i.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){""!==s&&v(s).then((function(t){e.push(o+"/"+s)})).catch((function(){g("No results")}))},className:t.button,children:Object(i.jsx)("b",{children:"Search"})})]})]})},k=n(189),w=n(191),N=n(190),S=Object(f.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),B=function(e){var t=e.cardMeta,n=e.cardBody,r=S();return Object(i.jsxs)(k.a,{className:r.root,children:[Object(i.jsx)(N.a,{action:t.action,title:t.title,subheader:t.subTitle}),Object(i.jsx)(w.a,{children:n})]})},C=n(192),E=function(e){e.data;return Object(i.jsxs)(C.a,{container:!0,spacing:3,children:[Object(i.jsx)(C.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Dependencies"},cardBody:null})}),Object(i.jsx)(C.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Licenses"},cardBody:null})}),Object(i.jsx)(C.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Security Advisories"},cardBody:null})})]})},M=n(93),R=n.n(M),L=n(94),T=n.n(L),D=n(40),W=["text","icon","link"],I=Object(f.a)((function(e){return{root:{display:"flex"}}})),z=function(e){var t=e.text,n=e.icon,r=e.link,a=Object(D.a)(e,W),o=I();return Object(i.jsxs)("div",{className:"".concat(o.root," ").concat(a.className),children:[n,Object(i.jsx)(c.a,{href:r||null,variant:"body2",align:"center",children:t})]})};function P(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var r=Math.floor(n);return r+" year"+(1!==r?"s":"")}if((n=t/2592e3)>1){var a=Math.floor(n);return a+" month"+(1!==a?"s":"")}if((n=t/86400)>1){var o=Math.floor(n);return o+" day"+(1!==o?"s":"")}if((n=t/3600)>1){var c=Math.floor(n);return c+" hour"+(1!==c?"s":"")}if((n=t/60)>1){var i=Math.floor(n);return i+" minute"+(1!==i?"s":"")}var s=Math.floor(t);return s+" second"+(1!==s?"s":"")}var F=Object(f.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3)}}})),_=function(e){var t,n,r,a,o=e.data,s=F();return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:s.titleRow,children:[Object(i.jsx)(c.a,{variant:"h4",children:Object(i.jsx)("b",{children:o.info.name})}),Object(i.jsxs)(c.a,{className:s.marginLeft,variant:"subtitle1",children:["v",null===(t=o.info)||void 0===t?void 0:t.version]})]}),Object(i.jsx)(c.a,{gutterBottom:!0,variant:"body1",children:null===(n=o.info)||void 0===n?void 0:n.summary}),Object(i.jsxs)("div",{className:s.linksRow,children:[Object(i.jsx)(z,{text:null===(r=o.info)||void 0===r?void 0:r.license,icon:Object(i.jsx)(R.a,{})}),Object(i.jsx)(z,{className:s.marginLeft,text:"Latest version published "+P(new Date(null===(a=o.releases[o.info.version][0])||void 0===a?void 0:a.upload_time))+" ago.",icon:Object(i.jsx)(T.a,{})})]})]})},q=n(70),G=n(198),J=["children","value","index"],A=function(e){var t=e.children,n=e.value,r=e.index,a=Object(D.a)(e,J);return Object(i.jsx)("div",Object(q.a)(Object(q.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),{},{children:n===r&&Object(i.jsx)(G.a,{children:t})}))},H=n(19);function U(e,t,n){var r=n.filter((function(t){return e.includes(t.from)})),a={nodes:[],edges:[]};return r.forEach((function(e){var r=V(e,{nodes:[],edges:[]},n,t);a={nodes:Object(H.a)(new Set([].concat(Object(H.a)(r.nodes),Object(H.a)(a.nodes)))),edges:Object(H.a)(new Set([].concat(Object(H.a)(r.edges),Object(H.a)(a.edges))))}})),a}function V(e,t,n,r){if(t.edges.includes(e.id))return t;if(t.nodes.push(e.from,e.to),t.edges.push(e.id),e.to===r)return t;var a={nodes:[],edges:[]};return n.filter((function(t){return t.from===e.to})).forEach((function(e){var o=V(e,t,n,r);a={nodes:Object(H.a)(new Set([].concat(Object(H.a)(o.nodes),Object(H.a)(a.nodes)))),edges:Object(H.a)(new Set([].concat(Object(H.a)(o.edges),Object(H.a)(a.edges))))}})),a}var Y={manipulation:{enabled:!1,editNode:function(e,t){e.fixed=!e.fixed.x,t(e)}},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!1},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},K=n(51),Q=["data","searchText","root"],X=Object(f.a)((function(e){return{root:{display:"flex",flexFlow:"column nowrap"},canvas:{flex:"1 1 auto",height:"75vh"}}})),Z=function(e){var t=e.data,n=(e.searchText,e.root),r=Object(D.a)(e,Q),a=Object(l.useRef)(null),o=X();Object(l.useEffect)((function(){var e=a.current&&new K.b(a.current,t,Y),r=t.nodes.get(n);r.color="#4fc1ea",r.font={color:"#4fc1ea",strokeWidth:3,size:20},t.nodes.updateOnly(r);var o=document.getElementById("mynetwork").getElementsByTagName("canvas")[0];function c(e){o.style.cursor=e}e.on("hoverNode",(function(){c("grab")})),e.on("blurNode",(function(){c("default")})),e.on("dragStart",(function(){c("grabbing")})),e.on("dragging",(function(){c("grabbing")})),e.on("dragEnd",(function(){c("grab")})),e.on("dragEnd",(function(t){0!==t.nodes.length&&e.editNode(t.nodes[0])})),e.on("dragStart",(function(t){0!==t.nodes.length&&void 0!==e.body.nodes[t.nodes[0]].options.x&&e.body.nodes[t.nodes[0]].options.x&&e.editNode(t.nodes[0])}))}),[a,t,n]);return Object(i.jsxs)("div",{className:"".concat(o.root," ").concat(r.className),children:[Object(i.jsx)(b,{label:"Filter packages",onChange:function(e){return function(e,t){if(t.nodes.updateOnly(t.nodes.get().map((function(e){return e.id!==n&&(e.color=Y.nodes.color,e.font=Y.nodes.font),e}))),t.edges.updateOnly(t.edges.get().map((function(e){return e.color=Y.edges.color,e}))),""!==e){var r=t.nodes.get({filter:function(t){return t.label.includes(e)}}),a=U(r.map((function(e){return e.id})),n,t.edges.map((function(e){return e}))),o=t.edges.get().filter((function(e){return!a.edges.includes(e.id)})).map((function(e){return e.color={color:"#e3e5e8"},e})),c=t.nodes.get().filter((function(e){return!a.nodes.includes(e.id)})).map((function(e){return e.id!==n&&(e.color={background:"#e3e5e8"},e.font={color:"#e3e5e8",strokeWidth:2,size:15}),e}));r=r.map((function(e){return e.id!==n&&(e.color={background:"#f39200"}),e})),t.nodes.updateOnly(c.concat(r)),t.edges.updateOnly(o)}}(e,t)}}),Object(i.jsx)("div",{ref:a,id:"mynetwork",className:o.canvas})]})},$=function(e){var t=e.text;return Object(i.jsx)(c.a,{variant:"h2",children:t})},ee=n(147),te=n(193),ne=function(e){var t=e.children,n=e.state,r=e.errorPage,a=e.loadingPage;return Object(i.jsx)(i.Fragment,{children:"error"===n?null!==r&&void 0!==r?r:Object(i.jsx)(s,{}):"loading"===n?null!==a&&void 0!==a?a:Object(i.jsx)(te.a,{}):t})},re=Object(f.a)((function(e){return{graph:{padding:e.spacing(4)}}})),ae=function(e){var t=e.graphData,n=e.metadata,r=re();return Object(i.jsx)(ne,{state:void 0===t?"loading":"error"===t?"error":void 0,errorPage:Object(i.jsx)($,{text:"Could not load in dependency graph"}),children:Object(i.jsx)(ee.a,{children:Object(i.jsx)(Z,{data:{nodes:new K.a(null===t||void 0===t?void 0:t.nodes),edges:new K.a(null===t||void 0===t?void 0:t.edges)},className:r.graph,root:n.info.name+n.info.version})})})},oe=n(21),ce=n.n(oe),ie=n(44),se=n(95),de=n.n(se);function le(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(ie.a)(ce.a.mark((function e(t,n){var r,a,o,c,i=arguments;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:2,a=i.length>3&&void 0!==i[3]?i[3]:[],o=[],c=[],0===a.length&&o.push({id:t+n,label:t}),r-=1,e.next=8,O(t,n).then(function(){var e=Object(ie.a)(ce.a.mark((function e(i){var s,d,l,u;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.data.dependencies.sort((function(e,t){return de()(e.version,t.version)})),d=[],l=ce.a.mark((function e(i){var l,u,f,h,j;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.includes(s[i].name)){e.next=6;break}return d.push(s[i].name),e.next=4,v(s[i].name,s[i].version).then(function(){var e=Object(ie.a)(ce.a.mark((function e(d){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.push({to:t+n,from:s[i].name+s[i].version}),a.includes(s[i].name)){e.next=8;break}if(a.push(s[i].name),o.push({id:s[i].name+s[i].version,label:s[i].name,data:d.data,depth:r}),null===d.data.info.requires_dist||0===d.data.info.requires_dist.length||0===r){e.next=8;break}return e.next=7,le(s[i].name,s[i].version,r,a).then((function(e){return{nodes:e.nodes,edges:e.edges}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:if(l=e.sent){for(u=0,f=l.nodes.length;u<f;u++)o.push(l.nodes[u]);for(h=0,j=l.edges.length;h<j;h++)c.push(l.edges[h])}case 6:case"end":return e.stop()}}),e)})),u=s.length-1;case 4:if(!(u>=0)){e.next=9;break}return e.delegateYield(l(u),"t0",6);case 6:u--,e.next=4;break;case 9:return e.abrupt("return",{nodes:o,edges:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return{nodes:o,edges:c}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(ie.a)(ce.a.mark((function e(t){var n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,le(t.info.name,t.info.version,3).then((function(e){return n.graphData=e,n}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=n(199),je=n(194),be=Object(f.a)((function(e){return{root:{flexGrow:1,maxWidth:"1440px",marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4)}}})),pe=function(e){e.location;var t=be(),n=Object(r.g)(),a=Object(l.useState)(void 0),o=Object(d.a)(a,2),c=o[0],s=o[1],u=Object(l.useState)(void 0),f=Object(d.a)(u,2),h=f[0],j=f[1],b=Object(l.useState)(0),p=Object(d.a)(b,2),g=p[0],x=p[1];Object(l.useEffect)((function(){v(null===n||void 0===n?void 0:n.package,null===n||void 0===n?void 0:n.version).then((function(e){s(e.data),function(e){return fe.apply(this,arguments)}(e.data).then((function(e){j(e.graphData)}))})).catch((function(e){s("error")}))}),[n]);return Object(i.jsx)(ne,{state:void 0===c?"loading":"error"===c?"error":void 0,children:Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsx)(_,{data:c}),Object(i.jsxs)(he.a,{value:g,onChange:function(e,t){x(t)},indicatorColor:"primary",textColor:"primary",children:[Object(i.jsx)(je.a,{label:"Overview"}),Object(i.jsx)(je.a,{label:"Dependencies"})]}),Object(i.jsx)(A,{value:g,index:0,children:Object(i.jsx)(E,{})}),Object(i.jsx)(A,{value:g,index:1,children:Object(i.jsx)(ae,{graphData:h,metadata:c})})]})})},ge=n(187),xe=n(195),ve=n(196),Oe=Object(f.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),me=function(){var e=Oe();return Object(l.useEffect)((function(){}),[]),Object(i.jsx)("div",{className:e.root,children:Object(i.jsx)(ge.a,{component:"nav",children:Object(i.jsx)(xe.a,{button:!0,component:"a",children:Object(i.jsx)(ve.a,{primary:"Result"})})})})},ye=function(){return Object(i.jsxs)(r.c,{children:[Object(i.jsx)(r.a,{exact:!0,path:a,component:y}),Object(i.jsx)(r.a,{exact:!0,path:o+"/:package/:version?",component:pe}),Object(i.jsx)(r.a,{exact:!0,path:"/thoth-search/search",component:me}),Object(i.jsx)(r.a,{path:"*",children:Object(i.jsx)(s,{})})]})}},99:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(10),c=n.n(o),i=n(87),s=n(3);c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(i.a,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.60e5c583.chunk.js.map