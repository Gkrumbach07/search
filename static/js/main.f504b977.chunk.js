(this["webpackJsonpthoth-search"]=this["webpackJsonpthoth-search"]||[]).push([[0],{86:function(e,t,n){"use strict";(function(e){var a=n(87),r=n(44),o=n(96),c=n(148),i=n(149),s=n(3);e.packagesReleases={},t.a=function(){return Object(s.jsxs)(c.a,{theme:a.a,children:[Object(s.jsx)(i.a,{}),Object(s.jsx)(r.a,{children:Object(s.jsx)(o.a,{})})]})}}).call(this,n(62))},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(68),r=Object(a.a)({palette:{background:{default:"#f9f9f9"}}})},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return Oe}));var a=n(11),r="/thoth-search/",o=r+"dashboard",c=n(35),i=n(3),s=function(e){var t=e.text;return Object(i.jsxs)(c.a,{variant:"h2",children:["404: ",null!==t&&void 0!==t?t:"page"," not found!"]})},d=n(34),l=n(0),u=n.n(l),j=n(188),f=n(186),b=n(197),h=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"stretch",flexGrow:1}}})),p=function(e){var t=e.onChange,n=e.label,a=e.helperText,r=e.error,o=void 0!==r&&r,c=h();return Object(i.jsx)("div",{className:c.root,children:Object(i.jsx)(b.a,{type:"search",variant:"outlined",label:n,className:c.bar,onChange:function(e){return t(e.target.value)},helperText:a,error:o})})},g=n(65),x=n.n(g),O="https://api.moc.thoth-station.ninja/api/v1",v=function(e,t){return x.a.get("https://pypi.org/pypi/"+e+(t?"/"+t:"")+"/json")},m=Object(f.a)((function(e){return{root:{display:"flex",flexFlow:"column nowrap",alignItems:"center",marginTop:"20%"},search:{display:"flex",justifyContent:"center",alignItems:"stretch",minWidth:"50%"},description:{marginBottom:e.spacing(6)},title:{marginBottom:e.spacing(1)},button:{marginLeft:e.spacing(2)}}})),y=function(){var e=Object(a.f)(),t=m(),n=Object(l.useState)(""),r=Object(d.a)(n,2),s=r[0],u=r[1],f=Object(l.useState)(""),b=Object(d.a)(f,2),h=b[0],g=b[1];return Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsx)(c.a,{variant:"h4",className:t.title,children:Object(i.jsx)("b",{children:"Thoth Search"})}),Object(i.jsx)(c.a,{variant:"body1",className:t.description,children:"Use this search box to lookup specific Python packages."}),Object(i.jsxs)("div",{className:t.search,children:[Object(i.jsx)(p,{label:"Search for a Python package",onChange:function(e){return function(e){u(e),""!==h&&g("")}(e)},helperText:h,error:""!==h}),Object(i.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){""!==s&&v(s).then((function(t){e.push(o+"/"+s,t.data)})).catch((function(){g("No results")}))},className:t.button,children:Object(i.jsx)("b",{children:"Search"})})]})]})},k=n(189),w=n(191),N=n(190),S=Object(f.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),B=function(e){var t=e.cardMeta,n=e.cardBody,a=S();return Object(i.jsxs)(k.a,{className:a.root,children:[Object(i.jsx)(N.a,{action:t.action,title:t.title,subheader:t.subTitle}),Object(i.jsx)(w.a,{children:n})]})},E=n(192),C=function(e){e.data;return Object(i.jsxs)(E.a,{container:!0,spacing:3,children:[Object(i.jsx)(E.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Dependencies"},cardBody:null})}),Object(i.jsx)(E.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Licenses"},cardBody:null})}),Object(i.jsx)(E.a,{item:!0,xs:6,children:Object(i.jsx)(B,{cardMeta:{title:"Security Advisories"},cardBody:null})})]})},M=n(92),R=n.n(M),L=n(93),T=n.n(L),W=n(39),I=["text","icon","link"],z=Object(f.a)((function(e){return{root:{display:"flex"}}})),D=function(e){var t=e.text,n=e.icon,a=e.link,r=Object(W.a)(e,I),o=z();return Object(i.jsxs)("div",{className:"".concat(o.root," ").concat(r.className),children:[n,Object(i.jsx)(c.a,{href:a||null,variant:"body2",align:"center",children:t})]})};function F(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var a=Math.floor(n);return a+" year"+(1!==a?"s":"")}if((n=t/2592e3)>1){var r=Math.floor(n);return r+" month"+(1!==r?"s":"")}if((n=t/86400)>1){var o=Math.floor(n);return o+" day"+(1!==o?"s":"")}if((n=t/3600)>1){var c=Math.floor(n);return c+" hour"+(1!==c?"s":"")}if((n=t/60)>1){var i=Math.floor(n);return i+" minute"+(1!==i?"s":"")}var s=Math.floor(t);return s+" second"+(1!==s?"s":"")}var P=Object(f.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3)}}})),G=function(e){var t,n,a,r,o=e.data,s=P();return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:s.titleRow,children:[Object(i.jsx)(c.a,{variant:"h4",children:Object(i.jsx)("b",{children:o.info.name})}),Object(i.jsxs)(c.a,{className:s.marginLeft,variant:"subtitle1",children:["v",null===(t=o.info)||void 0===t?void 0:t.version]})]}),Object(i.jsx)(c.a,{gutterBottom:!0,variant:"body1",children:null===(n=o.info)||void 0===n?void 0:n.summary}),Object(i.jsxs)("div",{className:s.linksRow,children:[Object(i.jsx)(D,{text:null===(a=o.info)||void 0===a?void 0:a.license,icon:Object(i.jsx)(R.a,{})}),Object(i.jsx)(D,{className:s.marginLeft,text:"Latest version published "+F(new Date(null===(r=o.releases[o.info.version][0])||void 0===r?void 0:r.upload_time))+" ago.",icon:Object(i.jsx)(T.a,{})})]})]})},J=n(69),A=n(198),H=["children","value","index"],U=function(e){var t=e.children,n=e.value,a=e.index,r=Object(W.a)(e,H);return Object(i.jsx)("div",Object(J.a)(Object(J.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),{},{children:n===a&&Object(i.jsx)(A.a,{children:t})}))},V=n(19);function Y(e,t,n){var a=n.filter((function(t){return e.includes(t.from)})),r={nodes:[],edges:[]};return a.forEach((function(e){var a=_(e,{nodes:[],edges:[]},n,t);r={nodes:Object(V.a)(new Set([].concat(Object(V.a)(a.nodes),Object(V.a)(r.nodes)))),edges:Object(V.a)(new Set([].concat(Object(V.a)(a.edges),Object(V.a)(r.edges))))}})),r}function _(e,t,n,a){if(t.edges.includes(e.id))return t;if(t.nodes.push(e.from,e.to),t.edges.push(e.id),e.to===a)return t;var r={nodes:[],edges:[]};return n.filter((function(t){return t.from===e.to})).forEach((function(e){var o=_(e,t,n,a);r={nodes:Object(V.a)(new Set([].concat(Object(V.a)(o.nodes),Object(V.a)(r.nodes)))),edges:Object(V.a)(new Set([].concat(Object(V.a)(o.edges),Object(V.a)(r.edges))))}})),r}var q={manipulation:{enabled:!1,editNode:function(e,t){e.fixed=!e.fixed.x,t(e)}},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!1},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},K=n(48),Q=["data","searchText","root"],X=Object(f.a)((function(e){return{root:{display:"flex",flexFlow:"column nowrap"},canvas:{flex:"1 1 auto",height:"75vh"}}})),Z=function(e){var t=e.data,n=(e.searchText,e.root),a=Object(W.a)(e,Q),r=Object(l.useRef)(null),o=X();Object(l.useEffect)((function(){var e=r.current&&new K.b(r.current,t,q),a=t.nodes.get(n);a.color="#4fc1ea",a.font={color:"#4fc1ea",strokeWidth:3,size:20},t.nodes.updateOnly(a);var o=document.getElementById("mynetwork").getElementsByTagName("canvas")[0];function c(e){o.style.cursor=e}e.on("hoverNode",(function(){c("grab")})),e.on("blurNode",(function(){c("default")})),e.on("dragStart",(function(){c("grabbing")})),e.on("dragging",(function(){c("grabbing")})),e.on("dragEnd",(function(){c("grab")})),e.on("dragEnd",(function(t){0!==t.nodes.length&&e.editNode(t.nodes[0])})),e.on("dragStart",(function(t){0!==t.nodes.length&&void 0!==e.body.nodes[t.nodes[0]].options.x&&e.body.nodes[t.nodes[0]].options.x&&e.editNode(t.nodes[0])}))}),[r,t,n]);return Object(i.jsxs)("div",{className:"".concat(o.root," ").concat(a.className),children:[Object(i.jsx)(p,{label:"Filter packages",onChange:function(e){return function(e,t){if(t.nodes.updateOnly(t.nodes.get().map((function(e){return e.id!==n&&(e.color=q.nodes.color,e.font=q.nodes.font),e}))),t.edges.updateOnly(t.edges.get().map((function(e){return e.color=q.edges.color,e}))),""!==e){var a=t.nodes.get({filter:function(t){return t.label.includes(e)}}),r=Y(a.map((function(e){return e.id})),n,t.edges.map((function(e){return e}))),o=t.edges.get().filter((function(e){return!r.edges.includes(e.id)})).map((function(e){return e.color={color:"#e3e5e8"},e})),c=t.nodes.get().filter((function(e){return!r.nodes.includes(e.id)})).map((function(e){return e.id!==n&&(e.color={background:"#e3e5e8"},e.font={color:"#e3e5e8",strokeWidth:2,size:15}),e}));a=a.map((function(e){return e.id!==n&&(e.color={background:"#f39200"}),e})),t.nodes.updateOnly(c.concat(a)),t.edges.updateOnly(o)}}(e,t)}}),Object(i.jsx)("div",{ref:r,id:"mynetwork",className:o.canvas})]})},$=n(49),ee=n.n($),te=n(94),ne=n(95),ae=n.n(ne);function re(e,t){var n=[],a=[];return n.push({id:e+t,label:e}),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://pypi.org/simple";return x.a.get(O+"/python/package/dependencies",{params:{name:e,version:t,index:n},headers:{accept:"application/json"}})}(e,t).then((function(e){var t=e.data.dependencies;return t=t.sort((function(e,t){return ae()(e.version,t.version)}))})).then(function(){var r=Object(te.a)(ee.a.mark((function r(o){var c,i;return ee.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=ee.a.mark((function r(c){return ee.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(o[c].name,o[c].version).then((function(r){n.push({id:o[c].name+o[c].version,label:o[c].name}),a.push({to:e+t,from:o[c].name+o[c].version})}));case 2:case"end":return r.stop()}}),r)})),i=o.length-1;case 2:if(!(i>=0)){r.next=7;break}return r.delegateYield(c(i),"t0",4);case 4:i--,r.next=2;break;case 7:return r.abrupt("return",{nodes:new K.a(n),edges:new K.a(a)});case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}var oe=n(147),ce=Object(f.a)((function(e){return{graph:{padding:e.spacing(4)}}})),ie=function(e){var t=e.data,n=ce(),a=Object(l.useState)(void 0),r=Object(d.a)(a,2),o=r[0],c=r[1];return Object(l.useEffect)((function(){re(t.info.name,t.info.version).then((function(e){c(e)}))}),[t]),Object(i.jsx)(oe.a,{children:void 0!==o?Object(i.jsx)(Z,{data:o,className:n.graph,root:t.info.name+t.info.version}):null})},se=n(193),de=function(e){var t=e.children,n=e.state,a=e.errorPage,r=e.loadingPage;return Object(i.jsx)(i.Fragment,{children:"error"===n?null!==a&&void 0!==a?a:Object(i.jsx)(s,{}):"loading"===n?null!==r&&void 0!==r?r:Object(i.jsx)(se.a,{}):t})},le=n(199),ue=n(194),je=Object(f.a)((function(e){return{root:{flexGrow:1,maxWidth:"1440px",marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4)}}})),fe=function(e){var t=e.location,n=je(),r=Object(a.g)(),o=Object(l.useState)(t.state),c=Object(d.a)(o,2),s=c[0],j=c[1],f=u.a.useState(0),b=Object(d.a)(f,2),h=b[0],p=b[1];Object(l.useEffect)((function(){s||v(null===r||void 0===r?void 0:r.package,null===r||void 0===r?void 0:r.version).then((function(e){j(e.data)})).catch((function(e){j("error")}))}),[s,r]);return Object(i.jsx)(de,{state:void 0===s?"loading":"error"===s?"error":void 0,children:Object(i.jsxs)("div",{className:n.root,children:[Object(i.jsx)(G,{data:s}),Object(i.jsxs)(le.a,{value:h,onChange:function(e,t){p(t)},indicatorColor:"primary",textColor:"primary",children:[Object(i.jsx)(ue.a,{label:"Overview"}),Object(i.jsx)(ue.a,{label:"Dependencies"})]}),Object(i.jsx)(U,{value:h,index:0,children:Object(i.jsx)(C,{})}),Object(i.jsx)(U,{value:h,index:1,children:Object(i.jsx)(ie,{data:s})})]})})},be=n(187),he=n(195),pe=n(196),ge=Object(f.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),xe=function(){var e=ge();return Object(l.useEffect)((function(){}),[]),Object(i.jsx)("div",{className:e.root,children:Object(i.jsx)(be.a,{component:"nav",children:Object(i.jsx)(he.a,{button:!0,component:"a",children:Object(i.jsx)(pe.a,{primary:"Result"})})})})},Oe=function(){return Object(i.jsxs)(a.c,{children:[Object(i.jsx)(a.a,{exact:!0,path:r,component:y}),Object(i.jsx)(a.a,{exact:!0,path:o+"/:package/:version?",component:fe}),Object(i.jsx)(a.a,{exact:!0,path:"/thoth-search/search",component:xe}),Object(i.jsx)(a.a,{path:"*",children:Object(i.jsx)(s,{})})]})}},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=n(86),s=n(3);c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(i.a,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.f504b977.chunk.js.map